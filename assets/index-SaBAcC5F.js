var Te=Object.defineProperty;var Se=(s,t,e)=>t in s?Te(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var x=(s,t,e)=>Se(s,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();class S{constructor(t,e){x(this,"hours");x(this,"minutes");this.hours=t,this.minutes=e}toString(){const t=this.hours.toString().padStart(2,"0"),e=this.minutes.toString().padStart(2,"0");return`${t}:${e}`}toMinutes(){return this.hours*60+this.minutes}compare(t){return this.toMinutes()-t.toMinutes()}isBefore(t){return this.compare(t)<0}isAfter(t){return this.compare(t)>0}equals(t){return this.hours===t.hours&&this.minutes===t.minutes}}var V=(s=>(s[s.FifteenMinutes=15]="FifteenMinutes",s[s.ThirtyMinutes=30]="ThirtyMinutes",s[s.SixtyMinutes=60]="SixtyMinutes",s))(V||{}),H=(s=>(s.Vertical="vertical",s.Horizontal="horizontal",s))(H||{}),L=(s=>(s[s.Monday=0]="Monday",s[s.Tuesday=1]="Tuesday",s[s.Wednesday=2]="Wednesday",s[s.Thursday=3]="Thursday",s[s.Friday=4]="Friday",s[s.Saturday=5]="Saturday",s[s.Sunday=6]="Sunday",s))(L||{});const Mt=[0,1,2,3,4],Me={0:"Monday",1:"Tuesday",2:"Wednesday",3:"Thursday",4:"Friday",5:"Saturday",6:"Sunday"};function Nt(s,t=Me){return t[s]}var Kt=(s=>(s.mobileNoEvents="mobileNoEvents",s))(Kt||{});function te(s){return typeof s=="number"?s>=L.Monday&&s<=L.Sunday:!1}function ct(s){return s instanceof S}function Pt(s){const t=[];if(typeof s!="object"||s===null)return{success:!1,error:[{field:"event",message:"Event must be an object"}]};const e=s;return(typeof e.id!="string"||e.id.length===0)&&t.push({field:"id",message:"Event id is required and must be a non-empty string",value:e.id}),te(e.day)||t.push({field:"day",message:"Invalid day. Must be a valid DayOfWeek enum value (0-6)",value:e.day}),ct(e.startTime)||t.push({field:"startTime",message:"startTime must be a TimeOnly instance",value:e.startTime}),ct(e.endTime)||t.push({field:"endTime",message:"endTime must be a TimeOnly instance",value:e.endTime}),ct(e.startTime)&&ct(e.endTime)&&(e.endTime.isAfter(e.startTime)||t.push({field:"endTime",message:"endTime must be after startTime",value:{startTime:e.startTime.toString(),endTime:e.endTime.toString()}})),(typeof e.title!="string"||e.title.length===0)&&t.push({field:"title",message:"Event title is required and must be a non-empty string",value:e.title}),t.length>0?{success:!1,error:t}:{success:!0,data:void 0}}function Wt(s){const t=[];if(typeof s!="object"||s===null)return{success:!1,error:[{field:"config",message:"Config must be an object"}]};const e=s;return e.visibleDays!==void 0&&(!Array.isArray(e.visibleDays)||e.visibleDays.length===0?t.push({field:"visibleDays",message:"visibleDays must be a non-empty array",value:e.visibleDays}):e.visibleDays.forEach((i,n)=>{te(i)||t.push({field:`visibleDays[${n}]`,message:"Invalid day. Must be a valid DayOfWeek enum value (0-6)",value:i})})),e.startHour!==void 0&&(typeof e.startHour!="number"||!Number.isInteger(e.startHour)||e.startHour<0||e.startHour>23)&&t.push({field:"startHour",message:"startHour must be an integer between 0 and 23",value:e.startHour}),e.endHour!==void 0&&(typeof e.endHour!="number"||!Number.isInteger(e.endHour)||e.endHour<0||e.endHour>23)&&t.push({field:"endHour",message:"endHour must be an integer between 0 and 23",value:e.endHour}),e.startHour!==void 0&&e.endHour!==void 0&&e.endHour<=e.startHour&&t.push({field:"endHour",message:"endHour must be greater than startHour",value:{startHour:e.startHour,endHour:e.endHour}}),e.orientation!==void 0&&e.orientation!=="vertical"&&e.orientation!=="horizontal"&&t.push({field:"orientation",message:'orientation must be either "vertical" or "horizontal"',value:e.orientation}),e.eventGap!==void 0&&(typeof e.eventGap=="number"?(e.eventGap<0||!Number.isFinite(e.eventGap))&&t.push({field:"eventGap",message:"eventGap must be a non-negative finite number",value:e.eventGap}):typeof e.eventGap=="string"?/^-?\d*\.?\d+(px|rem|em|ch|ex|vh|vw|vmin|vmax|%|cm|mm|in|pt|pc)$/i.test(e.eventGap.trim())||t.push({field:"eventGap",message:'eventGap must be a valid CSS length unit (e.g., "4px", "0.5rem", "1em")',value:e.eventGap}):t.push({field:"eventGap",message:"eventGap must be a number or a CSS unit string",value:e.eventGap})),t.length>0?{success:!1,error:t}:{success:!0,data:void 0}}function $t(s,t,e){const n=(s.hours-t)*60+s.minutes;return Math.floor(n/e)}function Vt(s,t,e){const n=(s.hours-t)*60+s.minutes,o=Math.floor(n/e);return(n-o*e)/e}function st(s,t){if(s.day!==t.day)return!1;const e=s.startTime.toMinutes(),i=s.endTime.toMinutes(),n=t.startTime.toMinutes(),o=t.endTime.toMinutes();return e<o&&i>n}function Dt(s){const t=new Map;for(const e of s)t.has(e.day)||t.set(e.day,[]),t.get(e.day).push(e);return t}function It(s){if(s.length===0)return new Map;const t=[...s].sort((o,r)=>{var d,f;const a=((d=o.className)==null?void 0:d.includes("event-overflow-indicator"))??!1,l=((f=r.className)==null?void 0:f.includes("event-overflow-indicator"))??!1;if(a&&!l)return 1;if(!a&&l)return-1;const c=o.startTime.toMinutes(),h=r.startTime.toMinutes();return c!==h?c-h:r.endTime.toMinutes()-o.endTime.toMinutes()}),e=[],i=new Map;for(const o of t){let r=!1;for(let a=0;a<e.length;a++){const l=e[a];if(!l.some(h=>st(h,o))){l.push(o),i.set(o.id,{laneIndex:a,totalLanes:0}),r=!0;break}}r||(e.push([o]),i.set(o.id,{laneIndex:e.length-1,totalLanes:0}))}const n=[];for(const o of t){let r=!1;for(const a of n){for(const l of a){const c=t.find(h=>h.id===l);if(c&&st(o,c)){a.add(o.id),r=!0;break}}if(r)break}if(!r){const a=new Set([o.id]);let l=!0;for(;l;){l=!1;for(const c of t)if(!a.has(c.id))for(const h of a){const d=t.find(f=>f.id===h);if(d&&st(d,c)){a.add(c.id),l=!0;break}}}n.push(a)}}for(const o of n){const r=new Set;for(const l of o){const c=i.get(l);c&&r.add(c.laneIndex)}const a=r.size;for(const l of o){const c=i.get(l);c&&i.set(l,{...c,totalLanes:a})}}return i}const ee={backgroundColor:"#ffffff",alternateRowColor:"#f9fafb",headerBackgroundColor:"#f3f4f6",gridLineColor:"#e5e7eb",gridLineMajorColor:"#d1d5db",headerTextColor:"#111827",timeTextColor:"#6b7280",eventTextColor:"#ffffff",eventDefaultColor:"#3b82f6",eventHoverBorderColor:"#1d4ed8",overflowIndicatorColor:"#9ca3af",hoverHighlightColor:"rgba(59, 130, 246, 0.1)",selectionColor:"rgba(59, 130, 246, 0.2)"},Ce={crossAxisSize:80,headerSize:40,slotSize:60,minSlotSize:80,minDayColumnWidth:150,eventPadding:8,eventGap:2,eventBorderRadius:4},ie=2.75;class He{constructor(t,e={},i={}){x(this,"config");x(this,"dimensions");x(this,"theme");this.config=t,this.dimensions={...Ce,...e},this.theme={...ee,...i}}updateConfig(t){this.config={...this.config,...t}}updateDimensions(t){this.dimensions={...this.dimensions,...t}}computeLayout(t,e,i,n=1,o=null,r=[],a=!1){const l=this.config.orientation??H.Vertical,c=o!==null?[o]:this.config.visibleDays??[],h=this.getTimeSlotCount(),d=this.computeIntersectionBounds(),f=this.computeDayHeaderBounds(t,e,l),u=this.computeTimeAxisBounds(t,e,l,a),m=this.computeGridBounds(t,e,l,a),p=this.computeDayLayouts(c,m,f,l,o,r.length>0?r:this.config.visibleDays??[]),g=this.computeTimeSlotLayouts(h,m,u,l,o),v=this.computeEventLayouts(i,c,p,g,l,o);return{canvasWidth:t,canvasHeight:e,gridBounds:m,dayHeaderBounds:f,timeAxisBounds:u,intersectionBounds:d,days:p,timeSlots:g,events:v,orientation:l,devicePixelRatio:n,zoomedDay:o,isMobile:!1}}getTimeSlotCount(){const t=this.config.startHour??9,e=this.config.endHour??17,i=this.config.timeSlotInterval??V.SixtyMinutes;return Math.ceil((e-t)*60/i)}computeIntersectionBounds(){return{x:0,y:0,width:0,height:0}}computeDayHeaderBounds(t,e,i){return{x:0,y:0,width:0,height:0}}computeTimeAxisBounds(t,e,i,n=!1){return i===H.Vertical?{x:0,y:0,width:this.dimensions.crossAxisSize,height:e}:n?{x:0,y:0,width:t,height:0}:{x:0,y:0,width:t,height:this.dimensions.headerSize}}computeGridBounds(t,e,i,n=!1){return i===H.Vertical?{x:this.dimensions.crossAxisSize,y:0,width:t-this.dimensions.crossAxisSize,height:e}:n?{x:0,y:0,width:t,height:e}:{x:0,y:this.dimensions.headerSize,width:t,height:e-this.dimensions.headerSize}}computeDayLayouts(t,e,i,n,o,r){const a=t.length;if(a===0)return[];const l=40;return t.map((c,h)=>{const d=n===H.Vertical?{dayWidth:e.width/a,headerBounds:{x:i.x+h*(e.width/a),y:i.y,width:e.width/a,height:i.height},contentBounds:{x:e.x+h*(e.width/a),y:e.y,width:e.width/a,height:e.height}}:{dayHeight:e.height/a,headerBounds:{x:i.x,y:i.y+h*(e.height/a),width:i.width,height:e.height/a},contentBounds:{x:e.x,y:e.y+h*(e.height/a),width:e.width,height:e.height/a}},f={day:c,index:h,headerBounds:d.headerBounds,contentBounds:d.contentBounds};if(o!==null&&c===o){const u=r.indexOf(c),m=u>0,p=u<r.length-1,g=d.headerBounds.x,v=d.headerBounds.y,y=d.headerBounds.width,T=d.headerBounds.height,b=y,w=l*2,M=T-w;let C=v;f.prevButtonBounds={x:g,y:C,width:b,height:l},f.prevButtonDisabled=!m,C+=l,f.headerBounds={x:g,y:C,width:y,height:M},C+=M,f.nextButtonBounds={x:g,y:C,width:b,height:l},f.nextButtonDisabled=!p}return f})}computeTimeSlotLayouts(t,e,i,n,o=null){const r=this.config.startHour??9,a=this.config.timeSlotInterval??V.SixtyMinutes,l=[];for(let c=0;c<t;c++){const h=r*60+c*a,d=Math.floor(h/60),f=h%60,u=`${d.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`;if(n===H.Vertical){const m=e.height/t,p=e.y+c*m;l.push({timeMinutes:h,label:u,labelBounds:{x:i.x,y:p,width:i.width,height:m},lineStart:{x:e.x,y:p},lineEnd:{x:e.x+e.width,y:p}})}else{const m=e.width/t,p=o!==null?this.dimensions.minSlotSize*ie:this.dimensions.minSlotSize,g=Math.max(m,p),v=e.x+c*g;l.push({timeMinutes:h,label:u,labelBounds:{x:v,y:i.y,width:g,height:i.height},lineStart:{x:v,y:e.y},lineEnd:{x:v,y:e.y+e.height}})}}return l}computeEventLayouts(t,e,i,n,o,r){var h,d;const a=Dt(t),l=[],c=new Map;for(const[f,u]of a.entries())e.includes(f)&&c.set(f,It(u));for(const f of t){if(!e.includes(f.day))continue;const u=i.find(y=>y.day===f.day);if(!u)continue;const m=(h=c.get(f.day))==null?void 0:h.get(f.id),p=this.computeEventBounds(f,u,n,o,m),g=this.extractBackgroundColor(f)??this.theme.eventDefaultColor,v=((d=f.className)==null?void 0:d.includes("event-overflow-indicator"))??!1;l.push({event:f,bounds:p,laneInfo:m,isOverflow:v,backgroundColor:v?this.theme.overflowIndicatorColor:g,textColor:this.theme.eventTextColor,opacity:1,scale:1})}return l}computeEventBounds(t,e,i,n,o){const r=this.config.startHour??9,a=this.config.timeSlotInterval??V.SixtyMinutes,l=$t(t.startTime,r,a),c=Vt(t.startTime,r,a),h=$t(t.endTime,r,a),d=Vt(t.endTime,r,a),f=(o==null?void 0:o.laneIndex)??0,u=(o==null?void 0:o.totalLanes)??1,m=1/u,p=f*m,g=e.contentBounds,v=i.length;if(n===H.Vertical){const y=g.height/v,T=g.y+(l+c)*y,w=(h-l+d-c)*y,M=g.width*m,C=g.x+g.width*p,E=M-(u>1?this.dimensions.eventGap:0);return{x:C,y:T,width:E,height:w}}else{const y=i[l],T=i[Math.min(h,i.length-1)];if(!y||!T){const D=g.width/v,A=g.x+(l+c)*D,lt=(h-l+d-c)*D,N=g.height*m;let U=g.y+g.height*p,W=N-(u>1?this.dimensions.eventGap:0);return f===0&&u>1&&(U+=this.dimensions.eventGap,W-=this.dimensions.eventGap),{x:A,y:U,width:lt,height:W}}const b=y.labelBounds.width,w=y.labelBounds.x+c*b;let M=0;for(let D=l;D<=Math.min(h,i.length-1);D++){const A=i[D];D===l&&D===h?M+=A.labelBounds.width*(d-c):D===l?M+=A.labelBounds.width*(1-c):D===h?M+=A.labelBounds.width*d:M+=A.labelBounds.width}const C=g.height*m;let E=g.y+g.height*p,I=C-(u>1?this.dimensions.eventGap:0);return f===0&&u>1&&(E+=this.dimensions.eventGap,I-=this.dimensions.eventGap),{x:w,y:E,width:M,height:I}}}extractBackgroundColor(t){return t.color?t.color.trim():null}computeMobileLayout(t,e,i=1){const n=this.config.visibleDays??[],o=Dt(e),r=40,a=56,l=8,c=12,h=12;let d=0;const f=new Map;for(const g of n){const v=o.get(g)??[],y=v.length>0?v.length*a:a,T=r+h+y+l;f.set(g,T),d+=T}const u=[];let m=0;for(let g=0;g<n.length;g++){const v=n[g],y=f.get(v)??r+h+l;u.push({day:v,index:g,headerBounds:{x:0,y:m,width:t,height:r},contentBounds:{x:0,y:m+r+h,width:t,height:y-r-h}}),m+=y}const p=[];for(const g of u){const y=[...o.get(g.day)??[]].sort((T,b)=>T.startTime.toMinutes()-b.startTime.toMinutes());for(let T=0;T<y.length;T++){const b=y[T],w=this.extractBackgroundColor(b)??this.theme.eventDefaultColor;p.push({event:b,bounds:{x:c,y:g.contentBounds.y+T*a,width:t-c*2,height:a-4},isOverflow:!1,backgroundColor:w,textColor:this.theme.eventTextColor,opacity:1,scale:1})}}return{canvasWidth:t,canvasHeight:d,gridBounds:{x:0,y:0,width:t,height:d},dayHeaderBounds:{x:0,y:0,width:0,height:0},timeAxisBounds:{x:0,y:0,width:0,height:0},intersectionBounds:{x:0,y:0,width:0,height:0},days:u,timeSlots:[],events:p,orientation:H.Vertical,devicePixelRatio:i,zoomedDay:null,isMobile:!0}}getTheme(){return this.theme}getDimensions(){return this.dimensions}}function nt(s,t){return s.x>=t.x&&s.x<=t.x+t.width&&s.y>=t.y&&s.y<=t.y+t.height}class Le{constructor(t,e={}){x(this,"ctx");x(this,"canvas");x(this,"dpr");x(this,"theme");this.canvas=t;const i=t.getContext("2d",{alpha:!1});if(!i)throw new Error("Failed to get 2D context from canvas");this.ctx=i,this.dpr=window.devicePixelRatio||1,this.theme={...ee,...e}}resize(t,e){this.dpr=window.devicePixelRatio||1,this.canvas.width=Math.floor(t*this.dpr),this.canvas.height=Math.floor(e*this.dpr),this.ctx.scale(this.dpr,this.dpr)}getSize(){return{width:this.canvas.width/this.dpr,height:this.canvas.height/this.dpr}}getDevicePixelRatio(){return this.dpr}getContext(){return this.ctx}getTheme(){return this.theme}setTheme(t){this.theme={...this.theme,...t}}clear(t){const{width:e,height:i}=this.getSize();this.ctx.fillStyle=t??this.theme.backgroundColor,this.ctx.fillRect(0,0,e,i)}clearRect(t,e){this.ctx.fillStyle=e??this.theme.backgroundColor,this.ctx.fillRect(t.x,t.y,t.width,t.height)}save(){this.ctx.save()}restore(){this.ctx.restore()}clip(t){this.ctx.beginPath(),this.ctx.rect(t.x,t.y,t.width,t.height),this.ctx.clip()}translate(t,e){this.ctx.translate(t,e)}scale(t,e){this.ctx.scale(t,e)}setAlpha(t){this.ctx.globalAlpha=Math.max(0,Math.min(1,t))}resetAlpha(){this.ctx.globalAlpha=1}fillRect(t,e){this.ctx.fillStyle=e,this.ctx.fillRect(t.x,t.y,t.width,t.height)}strokeRect(t,e,i=1){this.ctx.strokeStyle=e,this.ctx.lineWidth=i;const n=i%2===1?.5:0;this.ctx.strokeRect(t.x+n,t.y+n,t.width,t.height)}fillRoundedRect(t,e,i){this.ctx.fillStyle=e,this.roundedRectPath(t,i),this.ctx.fill()}strokeRoundedRect(t,e,i,n=1){this.ctx.strokeStyle=e,this.ctx.lineWidth=n,this.roundedRectPath(t,i),this.ctx.stroke()}roundedRectPath(t,e){const{x:i,y:n,width:o,height:r}=t,a=Math.min(e,o/2,r/2);this.ctx.beginPath(),this.ctx.moveTo(i+a,n),this.ctx.lineTo(i+o-a,n),this.ctx.quadraticCurveTo(i+o,n,i+o,n+a),this.ctx.lineTo(i+o,n+r-a),this.ctx.quadraticCurveTo(i+o,n+r,i+o-a,n+r),this.ctx.lineTo(i+a,n+r),this.ctx.quadraticCurveTo(i,n+r,i,n+r-a),this.ctx.lineTo(i,n+a),this.ctx.quadraticCurveTo(i,n,i+a,n),this.ctx.closePath()}drawLine(t,e,i,n=1,o){this.ctx.strokeStyle=i,this.ctx.lineWidth=n,o&&this.ctx.setLineDash(o);const r=n%2===1?.5:0;this.ctx.beginPath(),this.ctx.moveTo(Math.floor(t.x)+r,Math.floor(t.y)+r),this.ctx.lineTo(Math.floor(e.x)+r,Math.floor(e.y)+r),this.ctx.stroke(),o&&this.ctx.setLineDash([])}drawHorizontalLine(t,e,i,n,o=1){this.drawLine({x:e,y:t},{x:i,y:t},n,o)}drawVerticalLine(t,e,i,n,o=1){this.drawLine({x:t,y:e},{x:t,y:i},n,o)}setFont(t){const e=t.style??"normal",i=t.weight??400;this.ctx.font=`${e} ${i} ${t.size}px ${t.family}`}measureText(t){return this.ctx.measureText(t)}drawText(t,e,i,n,o="left",r="top"){this.ctx.fillStyle=n,this.ctx.textAlign=o,this.ctx.textBaseline=r,this.ctx.fillText(t,e,i)}drawTextCentered(t,e,i){this.drawText(t,e.x+e.width/2,e.y+e.height/2,i,"center","middle")}drawTextEllipsis(t,e,i,n=0){const o=e.width-n*2;if(o<=0)return;let r=t;if(this.measureText(t).width>o){let l=0,c=t.length;for(;l<c;){const h=Math.ceil((l+c)/2),d=t.slice(0,h)+"…";this.measureText(d).width<=o?l=h:c=h-1}r=l>0?t.slice(0,l)+"…":"…"}this.ctx.fillStyle=i,this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.fillText(r,e.x+n,e.y+n)}drawImage(t,e){!t.complete||t.naturalWidth===0||this.ctx.drawImage(t,e.x,e.y,e.width,e.height)}drawImageCentered(t,e,i,n){if(!t.complete||t.naturalWidth===0)return;const o=n/2;this.ctx.drawImage(t,e-o,i-o,n,n)}drawShadow(t,e,i,n=0,o=2){this.ctx.shadowColor=e,this.ctx.shadowBlur=i,this.ctx.shadowOffsetX=n,this.ctx.shadowOffsetY=o}clearShadow(){this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0}fillGradientRect(t,e,i="vertical"){if(e.length===0)return;if(e.length===1){this.fillRect(t,e[0]);return}const n=i==="vertical"?this.ctx.createLinearGradient(t.x,t.y,t.x,t.y+t.height):this.ctx.createLinearGradient(t.x,t.y,t.x+t.width,t.y);e.forEach((o,r)=>{n.addColorStop(r/(e.length-1),o)}),this.ctx.fillStyle=n,this.ctx.fillRect(t.x,t.y,t.width,t.height)}eventToCanvasPoint(t){const e=this.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}beginPath(){this.ctx.beginPath()}moveTo(t){this.ctx.moveTo(t.x,t.y)}lineTo(t){this.ctx.lineTo(t.x,t.y)}closePath(){this.ctx.closePath()}fill(t){this.ctx.fillStyle=t,this.ctx.fill()}stroke(t,e=1){this.ctx.strokeStyle=t,this.ctx.lineWidth=e,this.ctx.stroke()}}function Ee(s){const t=document.createElement("div");t.style.color=s,document.body.appendChild(t);const e=getComputedStyle(t).color;document.body.removeChild(t);const i=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return i?{r:parseInt(i[1],10),g:parseInt(i[2],10),b:parseInt(i[3],10),a:i[4]?parseFloat(i[4]):1}:null}function dt(s,t){const e=Ee(s);return e?`rgba(${e.r}, ${e.g}, ${e.b}, ${t})`:s}const De={showAlternatingBackground:!0,showGridLines:!0,gridLineWidth:1,headerFont:{family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:14,weight:600},timeFont:{family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:12,weight:400}};class Ie{constructor(t,e={}){x(this,"renderer");x(this,"config");this.renderer=t,this.config={...De,...e}}updateConfig(t){this.config={...this.config,...t}}render(t,e=!1){const i=this.renderer.getTheme();this.renderer.clear(i.backgroundColor),this.config.showAlternatingBackground&&this.renderAlternatingBackground(t,i),this.config.showGridLines&&this.renderGridLines(t,i),e||this.renderTimeAxis(t,i)}renderGridLines(t,e){for(const i of t.timeSlots)this.renderer.drawLine(i.lineStart,i.lineEnd,e.gridLineColor,this.config.gridLineWidth);for(const i of t.days)t.orientation===H.Vertical?this.renderer.drawVerticalLine(i.contentBounds.x,t.gridBounds.y,t.gridBounds.y+t.gridBounds.height,e.gridLineColor,this.config.gridLineWidth):this.renderer.drawHorizontalLine(i.contentBounds.y,t.gridBounds.x,t.gridBounds.x+t.gridBounds.width,e.gridLineColor,this.config.gridLineWidth);this.renderer.strokeRect(t.gridBounds,e.gridLineColor,this.config.gridLineWidth)}renderAlternatingBackground(t,e){t.orientation===H.Vertical?t.timeSlots.forEach((i,n)=>{if(n%2===1){const o=t.gridBounds.height/t.timeSlots.length;this.renderer.fillRect({x:t.gridBounds.x,y:i.lineStart.y,width:t.gridBounds.width,height:o},e.alternateRowColor)}}):t.days.forEach((i,n)=>{n%2===1&&this.renderer.fillRect(i.contentBounds,e.alternateRowColor)})}renderTimeAxis(t,e){this.renderer.fillRect(t.timeAxisBounds,e.headerBackgroundColor),this.renderer.setFont(this.config.timeFont);for(const i of t.timeSlots){if(i.timeMinutes%60===0)if(t.orientation===H.Vertical){const l=t.timeAxisBounds.x,c=i.labelBounds.y;this.renderer.drawHorizontalLine(c,l,l+8,e.gridLineMajorColor,this.config.gridLineWidth)}else{const l=i.labelBounds.x,c=t.timeAxisBounds.y;this.renderer.drawVerticalLine(l,c,c+t.timeAxisBounds.height,e.gridLineMajorColor,this.config.gridLineWidth)}const r=i.labelBounds.x+4,a=(t.orientation===H.Vertical,i.labelBounds.y+i.labelBounds.height/2);this.renderer.drawText(i.label,r,a,e.timeTextColor,"left","middle")}t.orientation===H.Vertical?this.renderer.drawVerticalLine(t.timeAxisBounds.x+t.timeAxisBounds.width,0,t.canvasHeight,e.gridLineMajorColor,this.config.gridLineWidth):this.renderer.drawHorizontalLine(t.timeAxisBounds.y+t.timeAxisBounds.height,0,t.canvasWidth,e.gridLineMajorColor,this.config.gridLineWidth)}renderDayHoverHighlight(t,e){}renderNavigationButton(t,e,i,n,o,r=!1){}renderNavigationButtonHover(t,e,i,n){}renderDayColumnHighlight(t,e){this.renderer.fillRect(t.contentBounds,e.hoverHighlightColor)}}function ze(s,t,e="#ef4444",i=2){var d,f;const n=new Date,o=n.getHours()*60+n.getMinutes(),r=((d=t.timeSlots[0])==null?void 0:d.timeMinutes)??0,a=(((f=t.timeSlots[t.timeSlots.length-1])==null?void 0:f.timeMinutes)??0)+60;if(o<r||o>a)return;const l=a-r,h=(o-r)/l;if(t.orientation===H.Vertical){const u=t.gridBounds.y+t.gridBounds.height*h;s.drawHorizontalLine(u,t.gridBounds.x,t.gridBounds.x+t.gridBounds.width,e,i);const m=s.getContext();m.beginPath(),m.arc(t.gridBounds.x,u,4,0,Math.PI*2),m.fillStyle=e,m.fill()}else{const u=t.gridBounds.x+t.gridBounds.width*h;s.drawVerticalLine(u,t.gridBounds.y,t.gridBounds.y+t.gridBounds.height,e,i);const m=s.getContext();m.beginPath(),m.arc(u,t.gridBounds.y,4,0,Math.PI*2),m.fillStyle=e,m.fill()}}class Ae{constructor(t){x(this,"allowedTags",new Set(["p","strong","b","em","i","h2","h3","br"]));this.renderer=t}sanitizeHTML(t){var e;try{const i=`<div>${t}</div>`,o=new DOMParser().parseFromString(i,"text/html");if(o.querySelector("parsererror"))throw new Error("HTML parsing error");const a=(e=o.body)==null?void 0:e.querySelector("div");if(!a)return o.body?(this.sanitizeNode(o.body),o.body.innerHTML):this.escapeHTML(t);for(const l of Array.from(a.childNodes))this.sanitizeNode(l);return a.innerHTML}catch(i){return console.warn("Failed to sanitize HTML, escaping:",i),this.escapeHTML(t)}}sanitizeNode(t){if(t&&t.nodeType===Node.ELEMENT_NODE){const e=t,i=e.tagName.toLowerCase();if(!this.allowedTags.has(i)){const o=e.parentNode;if(o){const r=Array.from(e.childNodes);for(const a of r)o.insertBefore(a,e),this.sanitizeNode(a);o.removeChild(e)}return}for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);const n=Array.from(e.childNodes);for(const o of n)this.sanitizeNode(o)}}escapeHTML(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}render(t,e,i,n,o={}){const r={maxLines:o.maxLines??1/0,lineHeight:o.lineHeight??1.3,padding:o.padding??0},a=this.sanitizeHTML(t),l=this.parseHTML(a,i),c=this.calculateLayout(l,e,i,r);return this.drawLayout(c,e,n),{height:c.totalHeight,truncated:c.truncated}}parseHTML(t,e){const i=[];try{const o=new DOMParser().parseFromString(t,"text/html");if(o.querySelector("parsererror"))throw new Error("HTML parsing error");if(this.walkDOM(o.body,e,i),i.length===0){console.warn("No text segments extracted from HTML:",t);const a=o.body.textContent||"";if(a.trim())i.push({text:a.trim(),font:e,isLineBreak:!1});else{const l=t.replace(/<[^>]*>/g,"").trim();l&&i.push({text:l,font:e,isLineBreak:!1})}}}catch(n){console.warn("Failed to parse HTML, extracting plain text:",n);const o=t.replace(/<[^>]*>/g,"").trim();o&&i.push({text:o,font:e,isLineBreak:!1})}return i}walkDOM(t,e,i,n=""){if(t.nodeType===Node.TEXT_NODE){const o=t.textContent||"";o.length>0&&i.push({text:o,font:{...e},isLineBreak:!1})}else if(t.nodeType===Node.ELEMENT_NODE){const r=t.tagName.toLowerCase();if(!this.allowedTags.has(r)){for(const l of Array.from(t.childNodes))this.walkDOM(l,e,i,n);return}const a=this.applyTagStyle(r,e);r==="br"?i.push({text:"",font:a,isLineBreak:!0}):r==="p"&&n!=="p"&&i.length>0&&!i[i.length-1].isLineBreak&&i.push({text:"",font:a,isLineBreak:!0});for(const l of Array.from(t.childNodes))this.walkDOM(l,a,i,r);r==="p"&&n!=="p"&&i.push({text:"",font:a,isLineBreak:!0})}else for(const o of Array.from(t.childNodes))this.walkDOM(o,e,i,n)}applyTagStyle(t,e){const i={...e};switch(t){case"strong":case"b":i.weight=600;break;case"em":case"i":i.style="italic";break;case"h2":i.size=e.size*1.5,i.weight=600;break;case"h3":i.size=e.size*1.25,i.weight=600;break}return i}calculateLayout(t,e,i,n){const o=[],r=e.width-n.padding*2;let a=e.y+n.padding,l=[],c=n.padding,h=i.size*n.lineHeight,d=!1;for(const u of t){if(u.isLineBreak){if(l.length>0){const p=h;if(o.push({segments:[...l],y:a,height:p}),a+=p,l=[],c=n.padding,h=i.size*n.lineHeight,o.length>=n.maxLines){d=!0;break}}continue}this.renderer.setFont(u.font);const m=u.text.split(/(\s+)/);for(const p of m){if(!p)continue;if(/^\s+$/.test(p)){const w=this.renderer.measureText(" ").width;if(l.length>0&&c+w<=r){const M=l[l.length-1];M.text+=" ",c+=w}continue}const g=p,y=this.renderer.measureText(g).width,b=this.renderer.measureText(" ").width;if(l.length===0)if(y<=r)l.push({text:g,font:u.font,x:c}),c+=y,h=Math.max(h,u.font.size*n.lineHeight);else{const w=this.truncateText(g,r,u.font);l.push({text:w,font:u.font,x:c}),d=!0}else{const w=c+b+y;if(w<=r){const M=l[l.length-1];M.text+=" "+g,c=w,h=Math.max(h,u.font.size*n.lineHeight)}else{const M=h;if(o.push({segments:[...l],y:a,height:M}),a+=M,l=[],c=n.padding,h=u.font.size*n.lineHeight,o.length>=n.maxLines){d=!0;break}if(y<=r)l.push({text:g,font:u.font,x:c}),c+=y;else{const C=this.truncateText(g,r,u.font);l.push({text:C,font:u.font,x:c}),d=!0}}}}}if(l.length>0&&o.length<n.maxLines){const u=h;o.push({segments:[...l],y:a,height:u})}const f=o.reduce((u,m)=>u+m.height,0);return{lines:o,totalHeight:f,truncated:d}}truncateText(t,e,i){this.renderer.setFont(i);const n="…",r=this.renderer.measureText(n).width,a=e-r;if(a<=0)return n;let l=0,c=t.length;for(;l<c;){const h=Math.ceil((l+c)/2),d=t.slice(0,h);this.renderer.measureText(d).width<=a?l=h:c=h-1}return l>0?t.slice(0,l)+n:n}drawLayout(t,e,i){const n=this.renderer.getContext();n.save(),n.fillStyle=i,n.textAlign="left",n.textBaseline="top";for(const o of t.lines)for(const r of o.segments)this.renderer.setFont(r.font),n.fillText(r.text,e.x+r.x,o.y);n.restore()}}const Be={titleFont:{family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:13,weight:600},timeFont:{family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:11,weight:400},descriptionFont:{family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:11,weight:400},padding:6,borderRadius:4,showShadow:!1,shadowBlur:4,shadowColor:"rgba(0, 0, 0, 0.15)",hoverBorderWidth:2,minHeightForTime:40,minHeightForDescription:80,lineHeight:1.3,iconSpacing:4},ht="#000000";class Oe{constructor(t,e={}){x(this,"renderer");x(this,"richTextRenderer");x(this,"config");x(this,"imageCache",new Map);x(this,"imageLoadPromises",new Map);this.renderer=t,this.richTextRenderer=new Ae(t),this.config={...Be,...e}}updateConfig(t){this.config={...this.config,...t}}loadImage(t){const e=this.imageCache.get(t);if(e&&e.complete&&e.naturalWidth>0)return e;if(this.imageLoadPromises.has(t))return null;const i=new Image;i.crossOrigin="anonymous";const n=new Promise((o,r)=>{i.onload=()=>{this.imageCache.set(t,i),this.imageLoadPromises.delete(t),o(i)},i.onerror=()=>{this.imageLoadPromises.delete(t),r(new Error(`Failed to load image: ${t}`))}});return this.imageLoadPromises.set(t,n),i.src=t,null}render(t,e,i){const n=[...t.events].sort((o,r)=>{const a=o.bounds.width*o.bounds.height;return r.bounds.width*r.bounds.height-a});this.renderer.save(),this.renderer.clip(t.gridBounds);for(const o of n){const r=o.event.id===e,a=i?i(o.event):!0;this.renderEvent(o,r,a)}this.renderer.restore()}renderEvent(t,e=!1,i=!0){const{bounds:n,backgroundColor:o,opacity:r,scale:a,isOverflow:l}=t;let c=n;if(a!==1){const m=n.x+n.width/2,p=n.y+n.height/2,g=n.width*a,v=n.height*a;c={x:m-g/2,y:p-v/2,width:g,height:v}}const d=r*(i?1:.5);d<1&&this.renderer.setAlpha(d),this.config.showShadow&&!l&&this.renderer.drawShadow(c,this.config.shadowColor,this.config.shadowBlur);const f=_t(o,.7),u=o;this.renderer.fillRoundedRect(c,f,this.config.borderRadius),this.renderer.clearShadow(),this.renderer.strokeRoundedRect(c,u,this.config.borderRadius,1),l?this.renderOverflowContent(t,c):this.renderEventContent(t,c),d<1&&this.renderer.resetAlpha()}renderIcon(t,e,i,n,o){const r=t.size??o;switch(t.type){case"font":{let a=t.fontFamily??this.config.titleFont.family;return(a==="material-symbols-outlined"||a.includes("Material Symbols"))&&(a="Material Symbols Outlined"),this.renderer.setFont({family:a,size:r,weight:this.config.titleFont.weight}),this.renderer.drawText(t.content,e,i,n,"left","top"),r}case"image":return t.image.complete&&t.image.naturalWidth>0?(this.renderer.drawImage(t.image,{x:e,y:i,width:r,height:r}),r):0;case"url":{const a=this.loadImage(t.url);return a?(this.renderer.drawImage(a,{x:e,y:i,width:r,height:r}),r):0}}}renderEventContent(t,e){const{event:i}=t,n=this.config.padding,o=ht,r={x:e.x+n,y:e.y+n,width:e.width-n*2,height:e.height-n*2};if(r.width<=0||r.height<=0)return;let a=r.y,l=r.x,c=0;if(i.icon){const f=i.icon.size??this.config.titleFont.size;c=this.renderIcon(i.icon,l,a,o,f),c>0&&(l+=c+this.config.iconSpacing)}this.renderer.setFont(this.config.titleFont);const h=this.config.titleFont.size*this.config.lineHeight,d=r.width-(c>0?c+this.config.iconSpacing:0);if(d>0&&this.renderer.drawTextEllipsis(i.title,{x:l,y:a,width:d,height:h},o),a+=h,e.height>=this.config.minHeightForTime){const f=`${i.startTime.toString()} - ${i.endTime.toString()}`;this.renderer.setFont(this.config.timeFont);const u=this.config.timeFont.size*this.config.lineHeight;this.renderer.drawTextEllipsis(f,{x:r.x,y:a,width:r.width,height:u},dt(o,.8)),a+=u}if(e.height>=this.config.minHeightForDescription&&i.description){const f=this.config.descriptionFont.size*this.config.lineHeight,u=r.y+r.height-a;if(u>=f){const m={x:r.x,y:a,width:r.width,height:u};i.description.includes("<")&&i.description.includes(">")?this.richTextRenderer.render(i.description,m,this.config.descriptionFont,dt(o,.7),{maxLines:Math.floor(u/(this.config.descriptionFont.size*this.config.lineHeight)),lineHeight:this.config.lineHeight,padding:0}):(this.renderer.setFont(this.config.descriptionFont),this.renderer.drawTextEllipsis(i.description,m,dt(o,.7)))}}}renderOverflowContent(t,e){const{event:i}=t,n=ht;this.renderer.setFont({...this.config.titleFont,size:this.config.titleFont.size-1}),this.renderer.drawTextCentered(i.title,e,n)}renderAnimatedEvent(t,e,i=!1){const n=e.progress,o={x:q(e.currentBounds.x,e.targetBounds.x,n),y:q(e.currentBounds.y,e.targetBounds.y,n),width:q(e.currentBounds.width,e.targetBounds.width,n),height:q(e.currentBounds.height,e.targetBounds.height,n)},r={...t,bounds:o,opacity:q(e.opacity,e.targetOpacity,n),scale:q(e.scale,e.targetScale,n)};this.renderEvent(r,i)}renderMobile(t,e){this.renderer.save(),this.renderer.clip(t.gridBounds);for(const i of t.events){const n=e?e(i.event):!0;this.renderMobileEvent(i,n)}this.renderer.restore()}renderMobileEvent(t,e=!0){const{event:i,bounds:n,backgroundColor:o,opacity:r}=t,a=6,l=16,c=60,h=6,f=r*(e?1:.5);f<1&&this.renderer.setAlpha(f);const u=_t(o,.7),m=o;this.renderer.fillRoundedRect(n,u,a),this.renderer.strokeRoundedRect(n,m,a,1);const p=n.x+l,g=p+c+h,v=n.x+n.width-g-l,y=i.startTime.toString();if(this.renderer.setFont({...this.config.timeFont,size:14,weight:500}),this.renderer.drawText(y,p,n.y+n.height/2,ht,"left","middle"),v>0){const T={...this.config.titleFont,size:14};this.renderer.setFont(T);const b=T.size*this.config.lineHeight,w=n.y+(n.height-b-12)/2;this.renderer.drawTextEllipsis(i.title,{x:g,y:w,width:v,height:b},ht);const M=`${i.startTime.toString()} - ${i.endTime.toString()}`;this.renderer.setFont({...this.config.timeFont,size:11});const C=w+b+2;this.renderer.drawTextEllipsis(M,{x:g,y:C,width:v,height:14},"#666666")}f<1&&this.renderer.resetAlpha()}}function q(s,t,e){return s+(t-s)*e}function Ct(s){const t=s/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ht(s){const t=s<=.0031308?s*12.92:1.055*Math.pow(s,.4166666666666667)-.055;return Math.round(Math.max(0,Math.min(1,t))*255)}function Re(s,t,e){const i=Ct(s),n=Ct(t),o=Ct(e),r=.4122214708*i+.5363325363*n+.0514459929*o,a=.2119034982*i+.6806995451*n+.1073969566*o,l=.0883024619*i+.2817188376*n+.6299787005*o,c=Math.cbrt(r),h=Math.cbrt(a),d=Math.cbrt(l);return[.2104542553*c+.793617785*h-.0040720468*d,1.9779984951*c-2.428592205*h+.4505937099*d,.0259040371*c+.7827717662*h-.808675766*d]}function Fe(s,t,e){const i=s+.3963377774*t+.2158037573*e,n=s-.1055613458*t-.0638541728*e,o=s-.0894841775*t-1.291485548*e,r=i*i*i,a=n*n*n,l=o*o*o,c=4.0767416621*r-3.3077115913*a+.2309699292*l,h=-1.2684380046*r+2.6097574011*a-.3413193965*l,d=-.0041960863*r-.7034186147*a+1.707614701*l;return[Ht(c),Ht(h),Ht(d)]}function _t(s,t=.7){const e=s.replace("#",""),i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),[r,a,l]=Re(i,n,o),c=1,h=0,d=0,f=r+(c-r)*t,u=a+(h-a)*t,m=l+(d-l)*t,[p,g,v]=Fe(f,u,m),y=T=>T.toString(16).padStart(2,"0");return`#${y(p)}${y(g)}${y(v)}`}class ke{constructor(){x(this,"layout",null);x(this,"eventIndex",null)}updateLayout(t){this.layout=t,this.eventIndex=new Ne(t.gridBounds);for(const e of t.events)this.eventIndex.insert(e,e.bounds)}hitTest(t){if(!this.layout)return{type:"none",point:t};const e=this.hitTestEvents(t);if(e)return{type:"event",event:e.event,eventLayout:e,point:t};const i=this.hitTestTimeSlots(t);return i?{type:"time-slot",timeSlot:i,point:t}:nt(t,this.layout.gridBounds)?{type:"grid",point:t}:{type:"none",point:t}}hitTestEvents(t){if(!this.eventIndex)return null;const e=this.eventIndex.query(t);let i=null,n=1/0;for(const o of e)if(nt(t,o.bounds)){const r=o.bounds.width*o.bounds.height;r<n&&(n=r,i=o)}return i}hitTestTimeSlots(t){if(!this.layout)return null;for(const e of this.layout.timeSlots)if(nt(t,e.labelBounds))return e;return null}getEventsAtPoint(t){return this.eventIndex?this.eventIndex.query(t).filter(i=>nt(t,i.bounds)):[]}getEventsInRect(t){return this.eventIndex?this.eventIndex.queryRect(t):[]}getDayAtPoint(t){if(!this.layout)return null;for(const e of this.layout.days)if(nt(t,e.contentBounds))return e;return null}getTimeAtPoint(t){if(!this.layout)return null;const e=this.layout.timeSlots;if(e.length===0)return null;let i=0,n=e.length-1;for(;i<=n;){const o=Math.floor((i+n)/2),r=e[o],a=this.layout.orientation==="vertical",l=a?r.lineStart.y:r.lineStart.x,c=a?this.layout.gridBounds.height/e.length:this.layout.gridBounds.width/e.length,h=l+c,d=a?t.y:t.x;if(d<l)n=o-1;else if(d>h)i=o+1;else{const f=(d-l)/c,u=e.length>1?e[1].timeMinutes-e[0].timeMinutes:60;return{minutes:r.timeMinutes+Math.floor(f*u),slot:r}}}return null}}class Ne{constructor(t,e=50){x(this,"cellSize");x(this,"cells");x(this,"bounds");x(this,"items");this.bounds=t,this.cellSize=e,this.cells=new Map,this.items=[]}insert(t,e){this.items.push({item:t,bounds:e});const i=Math.floor((e.x-this.bounds.x)/this.cellSize),n=Math.floor((e.x+e.width-this.bounds.x)/this.cellSize),o=Math.floor((e.y-this.bounds.y)/this.cellSize),r=Math.floor((e.y+e.height-this.bounds.y)/this.cellSize);for(let a=i;a<=n;a++)for(let l=o;l<=r;l++){const c=`${a},${l}`;this.cells.has(c)||this.cells.set(c,[]),this.cells.get(c).push(t)}}query(t){const e=Math.floor((t.x-this.bounds.x)/this.cellSize),i=Math.floor((t.y-this.bounds.y)/this.cellSize),n=`${e},${i}`;return this.cells.get(n)||[]}queryRect(t){const e=new Set,i=Math.floor((t.x-this.bounds.x)/this.cellSize),n=Math.floor((t.x+t.width-this.bounds.x)/this.cellSize),o=Math.floor((t.y-this.bounds.y)/this.cellSize),r=Math.floor((t.y+t.height-this.bounds.y)/this.cellSize);for(let a=i;a<=n;a++)for(let l=o;l<=r;l++){const c=`${a},${l}`,h=this.cells.get(c);if(h)for(const d of h)e.add(d)}return Array.from(e)}clear(){this.cells.clear(),this.items=[]}getAll(){return this.items.map(t=>t.item)}}const Gt={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>s*(2-s),easeInOutQuad:s=>s<.5?2*s*s:-1+(4-2*s)*s,easeInCubic:s=>s*s*s,easeOutCubic:s=>--s*s*s+1,easeInOutCubic:s=>s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1,easeOutBack:s=>1+2.70158*Math.pow(s-1,3)+1.70158*Math.pow(s-1,2),easeInOutBack:s=>{const e=2.5949095;return s<.5?Math.pow(2*s,2)*((e+1)*2*s-e)/2:(Math.pow(2*s-2,2)*((e+1)*(s*2-2)+e)+2)/2}};class Pe{constructor(t=300,e="easeOutCubic"){x(this,"state");x(this,"rafId",null);x(this,"onFrame",null);x(this,"defaultDuration");x(this,"defaultEasing");this.defaultDuration=t,this.defaultEasing=e,this.state={isAnimating:!1,events:new Map,zoomProgress:null,scrollOffset:{x:0,y:0},targetScrollOffset:{x:0,y:0}}}setFrameCallback(t){this.onFrame=t}getState(){return this.state}isAnimating(){return this.state.isAnimating}animateEvent(t,e,i,n={}){const o=performance.now(),r={eventId:t,currentBounds:{...e},targetBounds:{...i},progress:0,startTime:o,duration:n.duration??this.defaultDuration,easing:n.easing??this.defaultEasing,opacity:n.fromOpacity??1,targetOpacity:n.toOpacity??1,scale:n.fromScale??1,targetScale:n.toScale??1};this.state.events.set(t,r),this.startAnimationLoop()}animateEvents(t){var i,n,o,r;const e=performance.now();for(const a of t){const l={eventId:a.eventId,currentBounds:{...a.from},targetBounds:{...a.to},progress:0,startTime:e,duration:((i=a.options)==null?void 0:i.duration)??this.defaultDuration,easing:((n=a.options)==null?void 0:n.easing)??this.defaultEasing,opacity:((o=a.options)==null?void 0:o.fromOpacity)??1,targetOpacity:((r=a.options)==null?void 0:r.toOpacity)??1,scale:1,targetScale:1};this.state.events.set(a.eventId,l)}this.startAnimationLoop()}animateEventAppear(t,e,i={}){this.animateEvent(t,e,e,{duration:i.duration??this.defaultDuration,easing:i.easing??"easeOutBack",fromOpacity:0,toOpacity:1,fromScale:.8,toScale:1})}animateEventDisappear(t,e,i={}){this.animateEvent(t,e,e,{duration:i.duration??this.defaultDuration*.7,easing:i.easing??"easeInQuad",fromOpacity:1,toOpacity:0,fromScale:1,toScale:.8})}animateZoom(t=this.defaultDuration){this.state.zoomProgress=0,this.startAnimationLoop();const e=performance.now(),i=()=>{const n=performance.now()-e,o=Math.min(1,n/t);this.state.zoomProgress=Gt[this.defaultEasing](o),o<1?requestAnimationFrame(i):this.state.zoomProgress=null};requestAnimationFrame(i)}animateScrollTo(t,e=this.defaultDuration){this.state.targetScrollOffset={...t},this.startAnimationLoop()}startAnimationLoop(){this.rafId===null&&(this.state.isAnimating=!0,this.rafId=requestAnimationFrame(this.tick.bind(this)))}stop(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.state.isAnimating=!1}tick(t){let e=!1;for(const[n,o]of this.state.events.entries()){const r=t-o.startTime,a=Math.min(1,r/o.duration),l=Gt[o.easing](a);o.progress=l,a>=1?this.state.events.delete(n):e=!0}We(this.state.scrollOffset,this.state.targetScrollOffset)>.5?(this.state.scrollOffset.x=Q(this.state.scrollOffset.x,this.state.targetScrollOffset.x,.15),this.state.scrollOffset.y=Q(this.state.scrollOffset.y,this.state.targetScrollOffset.y,.15),e=!0):this.state.scrollOffset={...this.state.targetScrollOffset},this.state.zoomProgress!==null&&this.state.zoomProgress<1&&(e=!0),this.onFrame&&this.onFrame(this.state),e?this.rafId=requestAnimationFrame(this.tick.bind(this)):(this.rafId=null,this.state.isAnimating=!1)}getEventAnimationState(t){return this.state.events.get(t)}isEventAnimating(t){return this.state.events.has(t)}cancelEventAnimation(t){this.state.events.delete(t)}cancelAll(){this.state.events.clear(),this.state.zoomProgress=null,this.state.scrollOffset={...this.state.targetScrollOffset},this.stop()}getInterpolatedBounds(t,e){const i=this.state.events.get(t);return i?{x:Q(i.currentBounds.x,i.targetBounds.x,i.progress),y:Q(i.currentBounds.y,i.targetBounds.y,i.progress),width:Q(i.currentBounds.width,i.targetBounds.width,i.progress),height:Q(i.currentBounds.height,i.targetBounds.height,i.progress)}:e}dispose(){this.stop(),this.state.events.clear(),this.onFrame=null}}function Q(s,t,e){return s+(t-s)*e}function We(s,t){const e=t.x-s.x,i=t.y-s.y;return Math.sqrt(e*e+i*i)}class Ot{constructor(t,e,i=[]){x(this,"container");x(this,"dayHeaderContainer");x(this,"intersectionDiv");x(this,"dayHeadersContainer");x(this,"dayHeaders",[]);x(this,"scrollAreaWrapper");x(this,"timeHeaderRow",null);x(this,"timeHeaderContent",null);x(this,"scrollContainer");x(this,"contentSizer");x(this,"canvasWrapper");x(this,"canvas");x(this,"usesSeparateTimeHeader",!1);x(this,"config");x(this,"allEvents");x(this,"events");x(this,"currentFilter",null);x(this,"highlightPredicate",null);x(this,"zoomedDay",null);x(this,"originalVisibleDays");x(this,"layout",null);x(this,"interactionState");x(this,"scrollX",0);x(this,"scrollY",0);x(this,"contentWidth",0);x(this,"contentHeight",0);x(this,"isProgrammaticScroll",!1);x(this,"renderer");x(this,"gridRenderer");x(this,"eventRenderer");x(this,"layoutEngine");x(this,"hitTester");x(this,"animationManager");x(this,"resizeObserver");x(this,"resizeTimeout",null);x(this,"rafId",null);x(this,"needsRender",!1);x(this,"hasCompletedInitialRender",!1);x(this,"hoverDebounceTimeout",null);x(this,"lastHoveredEventId",null);x(this,"hoverBrightness",new Map);x(this,"zoomTransition",null);x(this,"isMobileMode",!1);x(this,"originalContainerHeight");x(this,"originalContainerClasses");x(this,"originalContainerStyle");var c,h,d,f;this.container=t,this.originalContainerClasses=t.className||"",this.originalContainerStyle=t.getAttribute("style")||"",this.allEvents=[...i],this.events=[...i],this.config={visibleDays:e.visibleDays??[...Mt],startHour:e.startHour??9,endHour:e.endHour??17,timeSlotInterval:e.timeSlotInterval??V.SixtyMinutes,orientation:e.orientation??H.Vertical,dayNameTranslations:e.dayNameTranslations,icons:e.icons,eventGap:e.eventGap,overflowIndicatorFormat:e.overflowIndicatorFormat,translations:e.translations,canvas:e.canvas??{},dimensions:e.dimensions??{},grid:e.grid??{},events:e.events??{},showNowIndicator:e.showNowIndicator??!1,resizeDebounce:e.resizeDebounce??50},this.originalVisibleDays=[...this.config.visibleDays??Mt],this.interactionState={hoveredEvent:null,hoveredDay:null,hoveredNavButton:null,mousePosition:null,isMouseDown:!1,dragStart:null,cursor:"default"};const n=this.originalContainerClasses?this.originalContainerClasses.split(" ").filter(u=>u&&u!=="schedule-container"):[];this.container.className=["schedule-container",...n].join(" ").trim(),this.container.innerHTML="";const o=this.config.orientation===H.Vertical,r={crossAxisSize:80,headerSize:40},a=(c=this.config.canvas)==null?void 0:c.theme;this.container.classList.add(o?"vertical":"horizontal"),this.container.style.setProperty("--schedule-header-bg-color",(a==null?void 0:a.headerBackgroundColor)??"#f3f4f6"),this.container.style.setProperty("--schedule-grid-line-color",(a==null?void 0:a.gridLineColor)??"#e5e7eb"),this.container.style.setProperty("--schedule-grid-line-major-color",(a==null?void 0:a.gridLineMajorColor)??"#d1d5db"),this.container.style.setProperty("--schedule-text-color",(a==null?void 0:a.textColor)??"#374151"),this.container.style.setProperty("--schedule-day-hover-color",(a==null?void 0:a.dayHoverColor)??"#e5e7eb"),this.dayHeaderContainer=document.createElement("div"),this.dayHeaderContainer.className="schedule-day-header-container",this.dayHeaderContainer.style.cssText=`
      flex-direction: ${o?"row":"column"};
      ${o?`height: ${r.headerSize}px;`:`width: ${r.crossAxisSize}px;`}
      border-bottom: ${o?"1px":"0"} solid var(--schedule-grid-line-major-color);
      border-right: ${o?"0":"1px"} solid var(--schedule-grid-line-major-color);
    `,this.intersectionDiv=document.createElement("div"),this.intersectionDiv.className="schedule-intersection",this.intersectionDiv.style.cssText=`
      ${o?`width: ${r.crossAxisSize}px;`:`height: ${r.headerSize}px;`}
    `,this.dayHeadersContainer=document.createElement("div"),this.dayHeadersContainer.className="schedule-day-headers",this.dayHeadersContainer.style.cssText=`
      flex-direction: ${o?"row":"column"};
    `,this.dayHeaderContainer.appendChild(this.intersectionDiv),this.dayHeaderContainer.appendChild(this.dayHeadersContainer),this.scrollAreaWrapper=document.createElement("div"),this.scrollAreaWrapper.className="schedule-scroll-area-wrapper",this.scrollContainer=document.createElement("div"),this.scrollContainer.className="schedule-scroll-container scroll-hidden",this.contentSizer=document.createElement("div"),this.contentSizer.className="schedule-content-sizer",this.canvasWrapper=document.createElement("div"),this.canvasWrapper.className="schedule-canvas-wrapper",this.canvas=document.createElement("canvas"),this.canvas.className="schedule-canvas",this.canvas.style.opacity="0",this.canvasWrapper.appendChild(this.canvas),this.contentSizer.appendChild(this.canvasWrapper),this.scrollContainer.appendChild(this.contentSizer),this.scrollAreaWrapper.appendChild(this.scrollContainer),this.container.appendChild(this.dayHeaderContainer),this.container.appendChild(this.scrollAreaWrapper);const l=((h=this.config.canvas)==null?void 0:h.theme)??{};this.renderer=new Le(this.canvas,l),this.layoutEngine=new He(this.config,this.config.dimensions,l),this.gridRenderer=new Ie(this.renderer,{...this.config.grid,dayNameTranslations:this.config.dayNameTranslations,icons:this.config.icons}),this.eventRenderer=new Oe(this.renderer,this.config.events),this.hitTester=new ke,this.animationManager=new Pe(((d=this.config.canvas)==null?void 0:d.animationDuration)??300,((f=this.config.canvas)==null?void 0:f.defaultEasing)??"easeOutCubic"),this.animationManager.setFrameCallback(()=>{this.scheduleRender()}),this.startAnimationLoop(),this.attachEventListeners(),this.resizeObserver=new ResizeObserver(this.handleResize.bind(this)),this.resizeObserver.observe(this.container),this.handleResize()}static create(t,e,i=[]){if(!t||!(t instanceof HTMLElement))return{success:!1,error:new Error("Container must be a valid HTMLElement")};const n=Wt(e);if(!n.success){const a=n.error.map(l=>l.message).join(", ");return{success:!1,error:new Error(`Invalid configuration: ${a}`)}}const o=[];return i.forEach((a,l)=>{const c=Pt(a);c.success||c.error.forEach(h=>{o.push(`events[${l}].${h.field}: ${h.message}`)})}),o.length>0?{success:!1,error:new Error(`Invalid events: ${o.join(", ")}`)}:{success:!0,data:new Ot(t,e,i)}}getEvents(){return[...this.events]}updateEvents(t){const e=[];return t.forEach((i,n)=>{const o=Pt(i);o.success||o.error.forEach(r=>{e.push(`events[${n}].${r.field}: ${r.message}`)})}),e.length>0?{success:!1,error:new Error(`Invalid events: ${e.join(", ")}`)}:(this.allEvents=[...t],this.applyFilter(),this.calculateContentSize(),this.renderer.resize(this.contentWidth,this.contentHeight),this.invalidateLayout(),this.scheduleRender(),{success:!0,data:void 0})}filterEvents(t){return typeof t!="function"?{success:!1,error:new Error("Predicate must be a function")}:(this.currentFilter=t,this.applyFilter(),this.calculateContentSize(),this.renderer.resize(this.contentWidth,this.contentHeight),this.invalidateLayout(),this.scheduleRender(),{success:!0,data:void 0})}clearFilter(){return this.currentFilter=null,this.events=[...this.allEvents],this.calculateContentSize(),this.renderer.resize(this.contentWidth,this.contentHeight),this.invalidateLayout(),this.scheduleRender(),{success:!0,data:void 0}}highlightEvents(t){return typeof t!="function"?{success:!1,error:new Error("Predicate must be a function")}:(this.highlightPredicate=t,this.invalidateLayout(),this.scheduleRender(),{success:!0,data:void 0})}stopHighlighting(){return this.highlightPredicate=null,this.invalidateLayout(),this.scheduleRender(),{success:!0,data:void 0}}updateScrollContainerOverflow(){const t=this.config.orientation===H.Vertical,e=this.zoomedDay!==null,i=!t;if(this.scrollContainer.classList.remove("scroll-hidden","scroll-vertical","scroll-horizontal","scroll-both"),this.isMobileMode){this.removeTimeHeaderRow(),this.scrollAreaWrapper.classList.remove("has-time-header");return}i?(this.createTimeHeaderRow(),this.scrollAreaWrapper.classList.add("has-time-header"),e?this.contentHeight>this.scrollAreaWrapper.clientHeight-41-17?this.scrollContainer.classList.add("scroll-both"):this.scrollContainer.classList.add("scroll-horizontal"):this.scrollContainer.classList.add("scroll-hidden")):t&&e?(this.removeTimeHeaderRow(),this.scrollAreaWrapper.classList.remove("has-time-header"),this.scrollContainer.classList.add("scroll-vertical")):(this.removeTimeHeaderRow(),this.scrollAreaWrapper.classList.remove("has-time-header"),this.scrollContainer.classList.add("scroll-hidden"))}getFirstEventOfDay(t){const e=new Set;if(this.layout)for(const n of this.layout.events)!n.isOverflow&&n.event.day===t&&e.add(n.event.id);return this.events.filter(n=>n.day===t&&(e.has(n.id)||e.size===0)).sort((n,o)=>{const r=n.startTime.hours*60+n.startTime.minutes,a=o.startTime.hours*60+o.startTime.minutes;return r-a})[0]}zoomToDay(t,e,i=!1){if(this.zoomedDay===t)return;e||(e=this.getFirstEventOfDay(t));const n=this.zoomedDay!==null;let o=null;if(n){const a=this.originalVisibleDays.indexOf(this.zoomedDay);o=this.originalVisibleDays.indexOf(t)<a?"up":"down"}this.captureLayoutSnapshot(!0,t,n,o),this.zoomedDay=t,this.config.visibleDays=[t],this.layoutEngine.updateConfig({visibleDays:[t]}),this.calculateContentSize(),this.renderer.resize(this.contentWidth,this.contentHeight),this.updateScrollContainerOverflow(),this.invalidateLayout(),this.computeLayout();let r=null;if(this.layout&&this.zoomTransition&&this.config.orientation===H.Horizontal){if(i){let l=0;for(const u of this.layout.events){const m=u.bounds.x+u.bounds.width;m>l&&(l=m)}const c=this.scrollContainer.clientWidth;r=Math.max(0,l-c+20);const d=Math.max(0,this.scrollContainer.scrollWidth-c),f=Math.max(0,Math.min(r,d));this.zoomTransition.scrollOffsetX+=f,this.zoomTransition.scrollOffsetY=0}else if(e){const l=this.layout.events.find(h=>h.event.id===e.id),c=this.zoomTransition.fromSnapshots.get(e.id);if(l&&c){const h=c.bounds.x;r=l.bounds.x-h;const f=Math.max(0,this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth),u=Math.max(0,Math.min(r,f));this.zoomTransition.scrollOffsetX+=u,this.zoomTransition.scrollOffsetY=0}else if(l&&!c){const h=l.bounds.x;r=Math.max(0,h-20);const f=Math.max(0,this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth),u=Math.max(0,Math.min(r,f));this.zoomTransition.scrollOffsetX+=u,this.zoomTransition.scrollOffsetY=0}}}if(this.zoomTransition&&this.layout&&(this.zoomTransition.toLayout=this.layout),this.renderDayHeadersDOM(),this.renderFrame(),this.isProgrammaticScroll=!0,r!==null){const a=Math.max(0,this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth),l=Math.max(0,Math.min(r,a));this.scrollContainer.scrollLeft=l}else this.scrollContainer.scrollLeft=0;this.scrollX=this.scrollContainer.scrollLeft,this.scrollContainer.scrollTop=0,this.scrollY=0,this.syncTimeHeaderScroll(),requestAnimationFrame(()=>{this.isProgrammaticScroll=!1}),this.dispatchEvent("schedule-day-zoom",{day:t})}getZoomedDay(){return this.zoomedDay}resetZoom(){this.zoomedDay!==null&&(this.captureLayoutSnapshot(!1,null),this.zoomedDay=null,this.config.visibleDays=[...this.originalVisibleDays],this.layoutEngine.updateConfig({visibleDays:this.originalVisibleDays}),this.calculateContentSize(),this.renderer.resize(this.contentWidth,this.contentHeight),this.updateScrollContainerOverflow(),this.invalidateLayout(),this.computeLayout(),this.zoomTransition&&this.layout&&(this.zoomTransition.toLayout=this.layout),this.renderDayHeadersDOM(),this.renderFrame(),this.dispatchEvent("schedule-zoom-reset",{}))}captureLayoutSnapshot(t,e,i=!1,n=null){var d;const o=new Map,r=new Map,{width:a,height:l}=this.renderer.getSize();if(this.layout){for(const f of this.layout.events)o.set(f.event.id,{bounds:{...f.bounds},opacity:f.opacity,backgroundColor:f.backgroundColor,textColor:f.textColor,day:f.event.day});for(const f of this.layout.days)r.set(f.day,{day:f.day,headerBounds:{...f.headerBounds},contentBounds:{...f.contentBounds}})}const c=this.scrollX,h=this.scrollY;this.zoomTransition={progress:0,startTime:performance.now(),duration:i?250:((d=this.config.canvas)==null?void 0:d.animationDuration)??350,fromSnapshots:o,fromDays:r,toLayout:null,isZoomingIn:t,targetDay:e,canvasWidth:a,canvasHeight:l,scrollOffsetX:-c,scrollOffsetY:-h,isDayNavigation:i,navigationDirection:n}}getConfig(){return{...this.config}}updateConfig(t){var n;const e={...this.config,...t},i=Wt(e);if(!i.success){const o=i.error.map(r=>r.message).join(", ");return{success:!1,error:new Error(`Invalid configuration: ${o}`)}}return this.config={...this.config,...t,visibleDays:e.visibleDays??[...Mt],startHour:e.startHour??9,endHour:e.endHour??17,timeSlotInterval:e.timeSlotInterval??V.SixtyMinutes,orientation:e.orientation??H.Vertical},t.visibleDays&&this.zoomedDay===null&&(this.originalVisibleDays=[...t.visibleDays]),this.layoutEngine.updateConfig(this.config),t.dimensions&&this.layoutEngine.updateDimensions(t.dimensions),(t.grid||t.dayNameTranslations)&&this.gridRenderer.updateConfig({...t.grid,dayNameTranslations:t.dayNameTranslations??this.config.dayNameTranslations}),t.events&&this.eventRenderer.updateConfig(t.events),(n=t.canvas)!=null&&n.theme&&this.renderer.setTheme(t.canvas.theme),this.invalidateLayout(),this.scheduleRender(),{success:!0,data:void 0}}render(){this.invalidateLayout(),this.renderFrame()}destroy(){this.animationManager.dispose(),this.rafId!==null&&cancelAnimationFrame(this.rafId),this.resizeTimeout!==null&&clearTimeout(this.resizeTimeout),this.hoverDebounceTimeout!==null&&clearTimeout(this.hoverDebounceTimeout),this.resizeObserver.disconnect(),this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("mouseleave",this.handleMouseLeave),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mouseup",this.handleMouseUp),this.canvas.removeEventListener("click",this.handleClick),this.scrollContainer.removeEventListener("scroll",this.handleScroll),this.container.innerHTML="",this.container.className=this.originalContainerClasses,this.originalContainerStyle?this.container.setAttribute("style",this.originalContainerStyle):this.container.removeAttribute("style"),this.events=[],this.allEvents=[]}applyFilter(){this.currentFilter?this.events=this.allEvents.filter(t=>{try{return!!this.currentFilter(t)}catch{return!1}}):this.events=[...this.allEvents]}invalidateLayout(){this.layout=null}computeLayout(){if(this.layout)return;const{width:t,height:e}=this.renderer.getSize(),i=this.renderer.getDevicePixelRatio();if(this.isMobileMode)this.layout=this.layoutEngine.computeMobileLayout(t,this.events,i);else{const n=this.processEventsForDisplay();this.layout=this.layoutEngine.computeLayout(t,e,n,i,this.zoomedDay,this.originalVisibleDays,this.usesSeparateTimeHeader)}this.hitTester.updateLayout(this.layout)}processEventsForDisplay(){if(this.zoomedDay!==null)return this.events.filter(n=>n.day===this.zoomedDay);const t=this.config.visibleDays??[],e=[],i=Dt(this.events);for(const n of t){const o=i.get(n)??[];if(o.length===0)continue;const r=It(o),l=Math.max(...Array.from(r.values()).map(v=>v.laneIndex))<=2?3:2,c=new Map;o.forEach(v=>{const y=r.get(v.id);y&&(c.has(y.laneIndex)||c.set(y.laneIndex,[]),c.get(y.laneIndex).push(v))});const h=new Map;for(const[v,y]of c.entries()){const T=Math.max(...y.map(b=>b.lanePriority??0));h.set(v,T)}const d=new Set,f=new Set;for(const v of c.keys())v<l?d.add(v):f.add(v);let u=-1/0,m=-1;for(const v of f){const y=h.get(v)??0;y>u&&(u=y,m=v)}if(m>=0&&u>0){let v=1/0,y=-1;for(const T of d){const b=h.get(T)??0;(b<v||b<=v&&T>y)&&(v=b,y=T)}y>=0&&u>v&&(d.delete(y),d.add(m),f.delete(m),f.add(y))}if(this.highlightPredicate&&d.size>0&&f.size>0){const v=o.filter(y=>this.highlightPredicate(y));if(v.length>0){const y=[];for(const T of o){let b=!1;for(const w of y){for(const M of w){const C=o.find(E=>E.id===M);if(C&&st(T,C)){w.add(T.id),b=!0;break}}if(b)break}if(!b){const w=new Set([T.id]);let M=!0;for(;M;){M=!1;for(const C of o)if(!w.has(C.id))for(const E of w){const I=o.find(D=>D.id===E);if(I&&st(I,C)){w.add(C.id),M=!0;break}}}y.push(w)}}for(const T of y){const b=v.filter(w=>{if(!T.has(w.id))return!1;const M=r.get(w.id);return M&&f.has(M.laneIndex)});if(b.length>0&&d.size>0){const w=b[0],M=r.get(w.id);if(M){const C=M.laneIndex,E=Array.from(d),I=Math.max(...E);d.delete(I),d.add(C),f.delete(C),f.add(I)}}}}}const p=[],g=[];for(const v of o){const y=r.get(v.id);y&&d.has(y.laneIndex)?p.push(v):g.push(v)}if(e.push(...p),g.length>0){g.sort((b,w)=>b.startTime.toMinutes()-w.startTime.toMinutes());let v=[g[0]],y=g[0].endTime.toMinutes();const T=b=>{const w=b.reduce((E,I)=>I.startTime.toMinutes()<E.startTime.toMinutes()?I:E),M=b.reduce((E,I)=>I.endTime.toMinutes()>E.endTime.toMinutes()?I:E),C=this.config.overflowIndicatorFormat?this.config.overflowIndicatorFormat(b.length):`+${b.length} more`;e.push({id:`overflow-${n}-${w.id}`,day:n,startTime:w.startTime,endTime:M.endTime,title:C,className:"event-overflow-indicator"})};for(let b=1;b<g.length;b++){const w=g[b];w.startTime.toMinutes()<y?(v.push(w),y=Math.max(y,w.endTime.toMinutes())):(T(v),v=[w],y=w.endTime.toMinutes())}T(v)}}return e}scheduleRender(){this.needsRender||(this.needsRender=!0,this.rafId=requestAnimationFrame(()=>{this.needsRender=!1,this.rafId=null,this.renderFrame()}))}startAnimationLoop(){const t=()=>{let e=!1;const i=.18,n=.005;for(const[o,r]of this.hoverBrightness){const a=r.target-r.current;Math.abs(a)>n?(r.current+=a*i,e=!0):r.current=r.target,r.current===1&&r.target===1&&this.hoverBrightness.delete(o)}if(this.zoomTransition){const o=performance.now()-this.zoomTransition.startTime,r=Math.min(1,o/this.zoomTransition.duration);this.zoomTransition.progress=this.easeOutCubic(r),e=!0,r>=1&&(this.zoomTransition=null)}e&&this.scheduleRender(),requestAnimationFrame(t)};requestAnimationFrame(t)}easeOutCubic(t){return 1-Math.pow(1-t,3)}renderDayHeadersDOM(){var e,i,n,o,r,a;const t=this.zoomedDay?[this.zoomedDay]:this.config.visibleDays??[];if(this.intersectionDiv.innerHTML="",this.zoomedDay!==null){const l=document.createElement("button");l.className="schedule-reset-zoom-button",l.setAttribute("aria-label","Reset zoom");const c=((e=this.config.icons)==null?void 0:e.resetZoom)??"⟲";if((i=this.config.icons)!=null&&i.className){const h=document.createElement("span");h.className=this.config.icons.className,h.innerHTML=c,l.appendChild(h)}else l.innerHTML=c;l.addEventListener("click",h=>{h.stopPropagation(),this.resetZoom()}),this.intersectionDiv.appendChild(l)}this.dayHeadersContainer.innerHTML="",this.dayHeaders=[];for(const l of t){const c=document.createElement("div");if(c.className="schedule-day-header",this.zoomedDay===l){const d=this.originalVisibleDays.indexOf(l),f=d<=0,u=document.createElement("button");u.className="schedule-nav-button schedule-nav-button-prev",u.disabled=f;const m=((n=this.config.icons)==null?void 0:n.prevDay)??"↑";if((o=this.config.icons)!=null&&o.className){const p=document.createElement("span");p.className=this.config.icons.className,p.innerHTML=m,u.appendChild(p)}else u.innerHTML=m;f||u.addEventListener("click",p=>{p.stopPropagation(),d>0&&this.zoomToDay(this.originalVisibleDays[d-1])}),c.appendChild(u)}const h=document.createElement("div");if(h.className="schedule-day-label",h.textContent=Nt(l,this.config.dayNameTranslations),h.addEventListener("click",()=>{this.zoomedDay!==null?this.resetZoom():this.zoomToDay(l)}),c.appendChild(h),this.zoomedDay===l){const d=this.originalVisibleDays.indexOf(l),f=d>=this.originalVisibleDays.length-1,u=document.createElement("button");u.className="schedule-nav-button schedule-nav-button-next",u.disabled=f;const m=((r=this.config.icons)==null?void 0:r.nextDay)??"↓";if((a=this.config.icons)!=null&&a.className){const p=document.createElement("span");p.className=this.config.icons.className,p.innerHTML=m,u.appendChild(p)}else u.innerHTML=m;f||u.addEventListener("click",p=>{p.stopPropagation(),d<this.originalVisibleDays.length-1&&this.zoomToDay(this.originalVisibleDays[d+1])}),c.appendChild(u)}this.dayHeaders.push(c),this.dayHeadersContainer.appendChild(c)}}createTimeHeaderRow(){this.config.orientation===H.Horizontal&&(this.timeHeaderRow||(this.timeHeaderRow=document.createElement("div"),this.timeHeaderRow.className="schedule-time-header-row",this.timeHeaderContent=document.createElement("div"),this.timeHeaderContent.className="schedule-time-header-content",this.timeHeaderRow.appendChild(this.timeHeaderContent),this.scrollAreaWrapper.insertBefore(this.timeHeaderRow,this.scrollContainer)),this.timeHeaderContent&&(this.timeHeaderContent.style.width=`${this.contentWidth}px`),this.renderTimeHeaderLabels(),this.usesSeparateTimeHeader=!0)}removeTimeHeaderRow(){this.timeHeaderRow&&this.timeHeaderRow.parentNode&&this.timeHeaderRow.parentNode.removeChild(this.timeHeaderRow),this.timeHeaderRow=null,this.timeHeaderContent=null,this.usesSeparateTimeHeader=!1}renderTimeHeaderLabels(){if(!this.timeHeaderContent)return;this.timeHeaderContent.innerHTML="";const t=this.config.startHour??9,e=this.config.endHour??17,i=this.config.timeSlotInterval??V.SixtyMinutes,n=Math.ceil((e-t)*60/i),o=this.contentWidth/n;for(let r=0;r<n;r++){const a=t*60+r*i,l=Math.floor(a/60),c=a%60,h=`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`,d=document.createElement("div");d.className="schedule-time-slot-label",d.style.width=`${o}px`,d.textContent=h,this.timeHeaderContent.appendChild(d)}}syncTimeHeaderScroll(){this.timeHeaderRow&&this.usesSeparateTimeHeader&&(this.timeHeaderRow.scrollLeft=this.scrollContainer.scrollLeft)}renderFrame(){var i;if(this.computeLayout(),!this.layout)return;if(this.renderer.clear(),this.isMobileMode){this.renderMobileFrame();return}this.gridRenderer.render(this.layout,this.usesSeparateTimeHeader);const t=this.applyAnimations(this.layout),e=(i=this.interactionState.hoveredEvent)==null?void 0:i.id;this.eventRenderer.render(t,e,this.highlightPredicate),this.config.showNowIndicator&&ze(this.renderer,this.layout)}renderMobileFrame(){var i;if(!this.layout)return;const t=this.layoutEngine.getTheme();this.renderer.fillRect({x:0,y:0,width:this.layout.canvasWidth,height:this.layout.canvasHeight},t.backgroundColor);const e=new Map;for(const n of this.layout.events){const o=n.event.day;e.has(o)||e.set(o,[]),e.get(o).push(n.event)}for(const n of this.layout.days){const o=Nt(n.day,this.config.dayNameTranslations);if(this.renderer.setFont({family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:14,weight:600}),this.renderer.drawText(o,n.headerBounds.x+12,n.headerBounds.y+n.headerBounds.height/2,t.headerTextColor,"left","middle"),this.renderer.drawLine({x:n.headerBounds.x,y:n.headerBounds.y+n.headerBounds.height},{x:n.headerBounds.x+n.headerBounds.width,y:n.headerBounds.y+n.headerBounds.height},t.gridLineColor,1),(e.get(n.day)??[]).length===0){const a=((i=this.config.translations)==null?void 0:i[Kt.mobileNoEvents])??"No events";this.renderer.setFont({family:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',size:13,weight:400}),this.renderer.drawTextCentered(a,{x:n.contentBounds.x,y:n.contentBounds.y,width:n.contentBounds.width,height:n.contentBounds.height},dt(t.headerTextColor??"#666666",.6))}}this.eventRenderer.renderMobile(this.layout,this.highlightPredicate)}applyAnimations(t){const e=[],i=this.zoomTransition,n=(i==null?void 0:i.progress)??1,o=this.config.orientation===H.Vertical;if(i&&n<1&&i.isDayNavigation)return this.applyDayNavigationAnimation(t,i,n);for(const r of t.events){const a=r.event.id;let l={...r};if(i&&n<1){const h=i.fromSnapshots.get(a);if(h){const d={x:h.bounds.x+i.scrollOffsetX,y:h.bounds.y+i.scrollOffsetY,width:h.bounds.width,height:h.bounds.height};l.bounds=this.lerpRect(d,r.bounds,n),l.opacity=this.lerp(h.opacity,r.opacity,n)}else{const d=r.event.day,f=t.days.find(u=>u.day===d);if(i.isZoomingIn&&f){const u=i.fromDays.get(d);if(u){const m=u.contentBounds.x+i.scrollOffsetX,p=u.contentBounds.y+i.scrollOffsetY,g=o?m+u.contentBounds.width/2:p+u.contentBounds.height/2,v=o?r.bounds.x+r.bounds.width/2:r.bounds.y+r.bounds.height/2,y=(g-v)*(1-n);l.bounds={...r.bounds,x:o?r.bounds.x+y:r.bounds.x,y:o?r.bounds.y:r.bounds.y+y,width:this.lerp(r.bounds.width*.3,r.bounds.width,n),height:r.bounds.height}}l.opacity=n}else l.opacity=n}}const c=this.hoverBrightness.get(a);c&&c.current!==1&&(l.backgroundColor=this.adjustBrightness(l.backgroundColor,(c.current-1)*100)),e.push(l)}if(i&&n<1){for(const[r,a]of i.fromSnapshots)if(!t.events.some(c=>c.event.id===r)){const c=this.allEvents.find(h=>h.id===r)??this.events.find(h=>h.id===r);if(c){const h=a.bounds.x+i.scrollOffsetX,d=a.bounds.y+i.scrollOffsetY;let f=0;if(i.isZoomingIn&&i.targetDay!==null){const u=this.originalVisibleDays.indexOf(a.day),m=this.originalVisibleDays.indexOf(i.targetDay);if(u!==-1&&m!==-1){const p=u<m?-1:1,g=o?i.canvasWidth:i.canvasHeight;f=p*g*.5*n}}else{const u=t.days.find(m=>m.day===a.day);if(u){const m=o?u.contentBounds.x+u.contentBounds.width/2:u.contentBounds.y+u.contentBounds.height/2,p=o?h+a.bounds.width/2:d+a.bounds.height/2;f=(m-p)*n}}e.push({event:c,bounds:{x:o?h+f:h,y:o?d:d+f,width:i.isZoomingIn?this.lerp(a.bounds.width,a.bounds.width*.3,n):a.bounds.width,height:a.bounds.height},opacity:1-n,backgroundColor:a.backgroundColor,textColor:a.textColor,isOverflow:r.startsWith("overflow-"),scale:1})}}}return{...t,events:e}}applyDayNavigationAnimation(t,e,i){const n=[],o=e.canvasHeight,r=e.navigationDirection==="up",a=r?o*i:-o*i,l=r?-o*(1-i):o*(1-i);for(const[c,h]of e.fromSnapshots){const d=this.allEvents.find(f=>f.id===c)??this.events.find(f=>f.id===c);d&&n.push({event:d,bounds:{x:h.bounds.x,y:h.bounds.y+a,width:h.bounds.width,height:h.bounds.height},opacity:1-i,backgroundColor:h.backgroundColor,textColor:h.textColor,isOverflow:c.startsWith("overflow-"),scale:1})}for(const c of t.events){const h=c.event.id;let d={...c};d.bounds={...c.bounds,y:c.bounds.y+l},d.opacity=i;const f=this.hoverBrightness.get(h);f&&f.current!==1&&(d.backgroundColor=this.adjustBrightness(d.backgroundColor,(f.current-1)*100)),n.push(d)}return{...t,events:n}}lerp(t,e,i){return t+(e-t)*i}lerpRect(t,e,i){return{x:this.lerp(t.x,e.x,i),y:this.lerp(t.y,e.y,i),width:this.lerp(t.width,e.width,i),height:this.lerp(t.height,e.height,i)}}adjustBrightness(t,e){if(t.startsWith("rgba")){const d=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(d){const f=1+e/100,u=Math.min(255,Math.round(parseInt(d[1])*f)),m=Math.min(255,Math.round(parseInt(d[2])*f)),p=Math.min(255,Math.round(parseInt(d[3])*f));return t.replace(/rgba?\((\d+),\s*(\d+),\s*(\d+)/,`rgba(${u}, ${m}, ${p}`)}}const i=t.replace("#","");if(i.length!==6)return t;const n=parseInt(i.substring(0,2),16),o=parseInt(i.substring(2,4),16),r=parseInt(i.substring(4,6),16),a=1+e/100,l=Math.min(255,Math.round(n*a)),c=Math.min(255,Math.round(o*a)),h=Math.min(255,Math.round(r*a));return`#${l.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}`}handleResize(){const t=!this.hasCompletedInitialRender;this.resizeTimeout!==null&&clearTimeout(this.resizeTimeout);const e=()=>{const i=this.container.clientWidth,n=this.config.mobileBreakpoint??768,o=this.isMobileMode;this.isMobileMode=n>0&&i<n,o!==this.isMobileMode&&this.handleMobileModeChange(),this.calculateContentSize(),this.updateScrollContainerOverflow(),this.renderer.resize(this.contentWidth,this.contentHeight),this.isMobileMode||this.renderDayHeadersDOM(),this.invalidateLayout(),this.renderFrame(),this.resizeTimeout=null,this.hasCompletedInitialRender||(this.hasCompletedInitialRender=!0,requestAnimationFrame(()=>{this.canvas.style.opacity="1"}))};t?e():this.resizeTimeout=setTimeout(e,this.config.resizeDebounce??50)}handleMobileModeChange(){this.isMobileMode?(this.zoomedDay!==null&&this.resetZoom(),this.hideNavigationDOM(),this.hideDayHeadersDOM(),this.removeTimeHeaderRow(),this.scrollAreaWrapper.classList.remove("has-time-header"),this.originalContainerHeight||(this.originalContainerHeight=this.container.style.height),this.container.style.height="auto",this.container.style.overflow="visible",this.scrollAreaWrapper.style.overflow="visible",this.scrollContainer.style.overflow="visible",this.scrollContainer.classList.add("scroll-hidden")):(this.showDayHeadersDOM(),this.originalContainerHeight!==void 0&&(this.container.style.height=this.originalContainerHeight),this.container.style.overflow="",this.scrollAreaWrapper.style.overflow="",this.scrollContainer.style.overflow="",this.updateScrollContainerOverflow())}hideNavigationDOM(){this.dayHeaderContainer&&this.dayHeaderContainer.querySelectorAll(".schedule-nav-button, .schedule-reset-zoom").forEach(e=>e.style.display="none")}hideDayHeadersDOM(){this.dayHeaderContainer&&(this.dayHeaderContainer.style.display="none")}showDayHeadersDOM(){this.dayHeaderContainer&&(this.dayHeaderContainer.style.display="")}handleScroll(){const t=this.scrollContainer.scrollLeft;if(this.isProgrammaticScroll){this.scrollX=t,this.scrollY=this.scrollContainer.scrollTop,this.syncTimeHeaderScroll();return}this.scrollX=t,this.scrollY=this.scrollContainer.scrollTop,this.syncTimeHeaderScroll(),this.scheduleRender()}calculateContentSize(){var f,u;const t=this.config.orientation===H.Vertical,e=this.layoutEngine.getDimensions();this.usesSeparateTimeHeader=!1;let i=Math.floor(this.scrollAreaWrapper.clientWidth),n=Math.floor(this.scrollAreaWrapper.clientHeight);if(i=Math.max(0,i),n=Math.max(0,n),this.isMobileMode){this.usesSeparateTimeHeader=!1,this.contentWidth=i;const m=this.layoutEngine.computeMobileLayout(i,this.events,((f=this.config.canvas)==null?void 0:f.devicePixelRatio)??window.devicePixelRatio);this.contentHeight=m.canvasHeight;const p=Math.floor(this.contentWidth),g=Math.floor(this.contentHeight);this.contentSizer.style.width=`${p}px`,this.contentSizer.style.minWidth="0",this.contentSizer.style.height=`${g}px`,this.contentSizer.style.maxWidth=`${p}px`,this.contentSizer.style.maxHeight="",this.contentSizer.style.minHeight="0";return}const o=this.zoomedDay!==null?1:((u=this.config.visibleDays)==null?void 0:u.length)??5;this.contentHeight=n;let r=0,a=0;const l=e.headerSize,c=17;if(t)r=e.crossAxisSize+o*e.minDayColumnWidth;else{this.usesSeparateTimeHeader=!0;const m=l+1;let g=n-m-2;if(this.zoomedDay!==null){const v=this.config.startHour??9,y=this.config.endHour??17,T=this.config.timeSlotInterval??V.SixtyMinutes,b=Math.ceil((y-v)*60/T),w=e.minSlotSize*ie;r=b*w,g-=c;const M=this.events.filter(C=>C.day===this.zoomedDay);if(M.length>0){const C=It(M);let E=1;for(const A of C.values())A.totalLanes>E&&(E=A.totalLanes);const D=E*80;D>g&&(a=D)}}this.contentHeight=Math.max(g,a)}r>0?this.contentWidth=Math.max(i,r):!t&&this.usesSeparateTimeHeader?this.contentWidth=i-2:this.contentWidth=i;const h=Math.floor(this.contentWidth),d=Math.floor(this.contentHeight);this.contentSizer.style.width=`${h}px`,this.contentSizer.style.minWidth=r>0?`${Math.floor(r)}px`:"0",this.contentSizer.style.height=`${d}px`,this.contentSizer.style.maxWidth=`${h}px`,this.contentSizer.style.maxHeight=a>0?"":`${d}px`,this.contentSizer.style.minHeight=a>0?`${Math.floor(a)}px`:"0"}attachEventListeners(){this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleClick=this.handleClick.bind(this),this.handleWheel=this.handleWheel.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleScroll=this.handleScroll.bind(this),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("mouseleave",this.handleMouseLeave),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("click",this.handleClick),this.scrollContainer.addEventListener("scroll",this.handleScroll,{passive:!0}),this.canvas.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),this.canvas.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.canvas.addEventListener("touchend",this.handleTouchEnd)}handleMouseMove(t){const e=this.renderer.eventToCanvasPoint(t),i=this.adjustPointForScroll(e);this.interactionState.mousePosition=i;const n=this.hitTester.hitTest(i);this.updateHoverState(n),this.updateCursor(n),this.scheduleRender()}adjustPointForScroll(t){return t}handleMouseLeave(){this.interactionState.mousePosition=null,this.interactionState.hoveredEvent&&this.dispatchHoverEnd(this.interactionState.hoveredEvent),this.interactionState.hoveredEvent=null,this.canvas.style.cursor="default",this.scheduleRender()}handleMouseDown(t){const e=this.renderer.eventToCanvasPoint(t),i=this.adjustPointForScroll(e);this.interactionState.isMouseDown=!0,this.interactionState.dragStart=i}handleMouseUp(){this.interactionState.isMouseDown=!1,this.interactionState.dragStart=null}handleClick(t){var o;const e=this.renderer.eventToCanvasPoint(t),i=this.adjustPointForScroll(e),n=this.hitTester.hitTest(i);if(this.isMobileMode){this.handleMobileClick(n);return}switch(n.type){case"event":if((o=n.eventLayout)!=null&&o.isOverflow){const a=n.event.day;this.zoomToDay(a,void 0,!0)}else n.event&&this.dispatchEvent("schedule-event-click",{event:n.event});break;case"day-header":n.day!==void 0&&(this.zoomedDay===n.day?this.resetZoom():this.zoomToDay(n.day));break;case"prev-day-button":if(n.day!==void 0&&this.zoomedDay!==null){const r=this.originalVisibleDays.indexOf(this.zoomedDay);if(r>0){const a=this.originalVisibleDays[r-1];this.zoomToDay(a)}}break;case"next-day-button":if(n.day!==void 0&&this.zoomedDay!==null){const r=this.originalVisibleDays.indexOf(this.zoomedDay);if(r<this.originalVisibleDays.length-1){const a=this.originalVisibleDays[r+1];this.zoomToDay(a)}}break}}handleMobileClick(t){switch(t.type){case"event":t.event&&this.dispatchEvent("schedule-event-click",{event:t.event});break;case"day-header":t.day!==void 0&&this.dispatchEvent("schedule-day-click",{day:t.day});break}}handleWheel(t){t.preventDefault()}handleTouchStart(t){if(t.touches.length===1){this.isMobileMode||t.preventDefault();const e=t.touches[0],i=this.renderer.eventToCanvasPoint(e),n=this.adjustPointForScroll(i);this.interactionState.mousePosition=n,this.interactionState.isMouseDown=!0,this.interactionState.dragStart=n}}handleTouchMove(t){if(t.touches.length===1){this.isMobileMode||t.preventDefault();const e=t.touches[0],i=this.renderer.eventToCanvasPoint(e),n=this.adjustPointForScroll(i);this.interactionState.mousePosition=n;const o=this.hitTester.hitTest(n);this.updateHoverState(o),this.scheduleRender()}}handleTouchEnd(){if(this.interactionState.mousePosition&&this.interactionState.dragStart){const t=this.interactionState.mousePosition.x-this.interactionState.dragStart.x,e=this.interactionState.mousePosition.y-this.interactionState.dragStart.y;if(Math.sqrt(t*t+e*e)<10){const n=this.hitTester.hitTest(this.interactionState.mousePosition);this.handleTap(n)}}this.interactionState.isMouseDown=!1,this.interactionState.dragStart=null,this.interactionState.hoveredEvent=null,this.interactionState.hoveredDay=null,this.scheduleRender()}handleTap(t){var e;if(this.isMobileMode){this.handleMobileClick(t);return}switch(t.type){case"event":(e=t.eventLayout)!=null&&e.isOverflow?this.zoomToDay(t.event.day,void 0,!0):t.event&&this.dispatchEvent("schedule-event-click",{event:t.event});break}}updateHoverState(t){var e;t.type==="event"&&t.event&&!((e=t.eventLayout)!=null&&e.isOverflow)?this.lastHoveredEventId!==t.event.id&&(this.interactionState.hoveredEvent&&(this.setEventHoverBrightness(this.interactionState.hoveredEvent.id,!1),this.dispatchHoverEnd(this.interactionState.hoveredEvent)),this.interactionState.hoveredEvent=t.event,this.lastHoveredEventId=t.event.id,this.setEventHoverBrightness(t.event.id,!0),this.dispatchHover(t.event)):this.interactionState.hoveredEvent&&(this.setEventHoverBrightness(this.interactionState.hoveredEvent.id,!1),this.dispatchHoverEnd(this.interactionState.hoveredEvent),this.interactionState.hoveredEvent=null,this.lastHoveredEventId=null)}setEventHoverBrightness(t,e){const i=this.hoverBrightness.get(t);e?this.hoverBrightness.set(t,{current:(i==null?void 0:i.current)??1,target:1.12}):i&&(i.target=1)}updateCursor(t){let e="default";switch(t.type){case"event":e="pointer";break}this.canvas.style.cursor!==e&&(this.canvas.style.cursor=e)}dispatchHover(t){let e,i;if(this.layout){const n=this.layout.events.find(o=>o.event.id===t.id);if(n){e={...n.bounds};const o=this.canvas.getBoundingClientRect();i={x:o.left+n.bounds.x,y:o.top+n.bounds.y,width:n.bounds.width,height:n.bounds.height}}}this.dispatchEvent("schedule-event-hover",{event:t,bounds:e,viewportBounds:i})}dispatchHoverEnd(t){let e,i;if(this.layout){const n=this.layout.events.find(o=>o.event.id===t.id);if(n){e={...n.bounds};const o=this.canvas.getBoundingClientRect();i={x:o.left+n.bounds.x,y:o.top+n.bounds.y,width:n.bounds.width,height:n.bounds.height}}}this.dispatchEvent("schedule-event-hover-end",{event:t,bounds:e,viewportBounds:i})}dispatchEvent(t,e){const i=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0});this.container.dispatchEvent(i)}}const zt=Math.min,K=Math.max,ft=Math.round,F=s=>({x:s,y:s}),$e={left:"right",right:"left",bottom:"top",top:"bottom"},Ve={start:"end",end:"start"};function Xt(s,t,e){return K(s,zt(t,e))}function pt(s,t){return typeof s=="function"?s(t):s}function Z(s){return s.split("-")[0]}function vt(s){return s.split("-")[1]}function ne(s){return s==="x"?"y":"x"}function se(s){return s==="y"?"height":"width"}const _e=new Set(["top","bottom"]);function _(s){return _e.has(Z(s))?"y":"x"}function oe(s){return ne(_(s))}function Ge(s,t,e){e===void 0&&(e=!1);const i=vt(s),n=oe(s),o=se(n);let r=n==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=mt(r)),[r,mt(r)]}function Xe(s){const t=mt(s);return[At(s),t,At(t)]}function At(s){return s.replace(/start|end/g,t=>Ve[t])}const jt=["left","right"],Yt=["right","left"],je=["top","bottom"],Ye=["bottom","top"];function Ze(s,t,e){switch(s){case"top":case"bottom":return e?t?Yt:jt:t?jt:Yt;case"left":case"right":return t?je:Ye;default:return[]}}function Ue(s,t,e,i){const n=vt(s);let o=Ze(Z(s),e==="start",i);return n&&(o=o.map(r=>r+"-"+n),t&&(o=o.concat(o.map(At)))),o}function mt(s){return s.replace(/left|right|bottom|top/g,t=>$e[t])}function qe(s){return{top:0,right:0,bottom:0,left:0,...s}}function Qe(s){return typeof s!="number"?qe(s):{top:s,right:s,bottom:s,left:s}}function gt(s){const{x:t,y:e,width:i,height:n}=s;return{width:i,height:n,top:e,left:t,right:t+i,bottom:e+n,x:t,y:e}}function Zt(s,t,e){let{reference:i,floating:n}=s;const o=_(t),r=oe(t),a=se(r),l=Z(t),c=o==="y",h=i.x+i.width/2-n.width/2,d=i.y+i.height/2-n.height/2,f=i[a]/2-n[a]/2;let u;switch(l){case"top":u={x:h,y:i.y-n.height};break;case"bottom":u={x:h,y:i.y+i.height};break;case"right":u={x:i.x+i.width,y:d};break;case"left":u={x:i.x-n.width,y:d};break;default:u={x:i.x,y:i.y}}switch(vt(t)){case"start":u[r]-=f*(e&&c?-1:1);break;case"end":u[r]+=f*(e&&c?-1:1);break}return u}const Je=async(s,t,e)=>{const{placement:i="bottom",strategy:n="absolute",middleware:o=[],platform:r}=e,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:s,floating:t,strategy:n}),{x:h,y:d}=Zt(c,i,l),f=i,u={},m=0;for(let p=0;p<a.length;p++){const{name:g,fn:v}=a[p],{x:y,y:T,data:b,reset:w}=await v({x:h,y:d,initialPlacement:i,placement:f,strategy:n,middlewareData:u,rects:c,platform:r,elements:{reference:s,floating:t}});h=y??h,d=T??d,u={...u,[g]:{...u[g],...b}},w&&m<=50&&(m++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await r.getElementRects({reference:s,floating:t,strategy:n}):w.rects),{x:h,y:d}=Zt(c,f,l)),p=-1)}return{x:h,y:d,placement:f,strategy:n,middlewareData:u}};async function re(s,t){var e;t===void 0&&(t={});const{x:i,y:n,platform:o,rects:r,elements:a,strategy:l}=s,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:f=!1,padding:u=0}=pt(t,s),m=Qe(u),g=a[f?d==="floating"?"reference":"floating":d],v=gt(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(g)))==null||e?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),y=d==="floating"?{x:i,y:n,width:r.floating.width,height:r.floating.height}:r.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},w=gt(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:T,strategy:l}):y);return{top:(v.top-w.top+m.top)/b.y,bottom:(w.bottom-v.bottom+m.bottom)/b.y,left:(v.left-w.left+m.left)/b.x,right:(w.right-v.right+m.right)/b.x}}const Ke=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,i;const{placement:n,middlewareData:o,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=pt(s,t);if((e=o.arrow)!=null&&e.alignmentOffset)return{};const v=Z(n),y=_(a),T=Z(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=f||(T||!p?[mt(a)]:Xe(a)),M=m!=="none";!f&&M&&w.push(...Ue(a,p,m,b));const C=[a,...w],E=await re(t,g),I=[];let D=((i=o.flip)==null?void 0:i.overflows)||[];if(h&&I.push(E[v]),d){const N=Ge(n,r,b);I.push(E[N[0]],E[N[1]])}if(D=[...D,{placement:n,overflows:I}],!I.every(N=>N<=0)){var A,St;const N=(((A=o.flip)==null?void 0:A.index)||0)+1,U=C[N];if(U&&(!(d==="alignment"?y!==_(U):!1)||D.every(B=>_(B.placement)===y?B.overflows[0]>0:!0)))return{data:{index:N,overflows:D},reset:{placement:U}};let W=(St=D.filter(X=>X.overflows[0]<=0).sort((X,B)=>X.overflows[1]-B.overflows[1])[0])==null?void 0:St.placement;if(!W)switch(u){case"bestFit":{var lt;const X=(lt=D.filter(B=>{if(M){const $=_(B.placement);return $===y||$==="y"}return!0}).map(B=>[B.placement,B.overflows.filter($=>$>0).reduce(($,be)=>$+be,0)]).sort((B,$)=>B[1]-$[1])[0])==null?void 0:lt[0];X&&(W=X);break}case"initialPlacement":W=a;break}if(n!==W)return{reset:{placement:W}}}return{}}}},ti=new Set(["left","top"]);async function ei(s,t){const{placement:e,platform:i,elements:n}=s,o=await(i.isRTL==null?void 0:i.isRTL(n.floating)),r=Z(e),a=vt(e),l=_(e)==="y",c=ti.has(r)?-1:1,h=o&&l?-1:1,d=pt(t,s);let{mainAxis:f,crossAxis:u,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(u=a==="end"?m*-1:m),l?{x:u*h,y:f*c}:{x:f*c,y:u*h}}const ii=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var e,i;const{x:n,y:o,placement:r,middlewareData:a}=t,l=await ei(t,s);return r===((e=a.offset)==null?void 0:e.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:r}}}}},ni=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:e,y:i,placement:n}=t,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...l}=pt(s,t),c={x:e,y:i},h=await re(t,l),d=_(Z(n)),f=ne(d);let u=c[f],m=c[d];if(o){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=u+h[g],T=u-h[v];u=Xt(y,u,T)}if(r){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=m+h[g],T=m-h[v];m=Xt(y,m,T)}const p=a.fn({...t,[f]:u,[d]:m});return{...p,data:{x:p.x-e,y:p.y-i,enabled:{[f]:o,[d]:r}}}}}};function xt(){return typeof window<"u"}function it(s){return ae(s)?(s.nodeName||"").toLowerCase():"#document"}function z(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function P(s){var t;return(t=(ae(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function ae(s){return xt()?s instanceof Node||s instanceof z(s).Node:!1}function O(s){return xt()?s instanceof Element||s instanceof z(s).Element:!1}function k(s){return xt()?s instanceof HTMLElement||s instanceof z(s).HTMLElement:!1}function Ut(s){return!xt()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof z(s).ShadowRoot}const si=new Set(["inline","contents"]);function rt(s){const{overflow:t,overflowX:e,overflowY:i,display:n}=R(s);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!si.has(n)}const oi=new Set(["table","td","th"]);function ri(s){return oi.has(it(s))}const ai=[":popover-open",":modal"];function wt(s){return ai.some(t=>{try{return s.matches(t)}catch{return!1}})}const li=["transform","translate","scale","rotate","perspective"],ci=["transform","translate","scale","rotate","perspective","filter"],hi=["paint","layout","strict","content"];function Rt(s){const t=Ft(),e=O(s)?R(s):s;return li.some(i=>e[i]?e[i]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||ci.some(i=>(e.willChange||"").includes(i))||hi.some(i=>(e.contain||"").includes(i))}function di(s){let t=G(s);for(;k(t)&&!et(t);){if(Rt(t))return t;if(wt(t))return null;t=G(t)}return null}function Ft(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ui=new Set(["html","body","#document"]);function et(s){return ui.has(it(s))}function R(s){return z(s).getComputedStyle(s)}function bt(s){return O(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function G(s){if(it(s)==="html")return s;const t=s.assignedSlot||s.parentNode||Ut(s)&&s.host||P(s);return Ut(t)?t.host:t}function le(s){const t=G(s);return et(t)?s.ownerDocument?s.ownerDocument.body:s.body:k(t)&&rt(t)?t:le(t)}function ce(s,t,e){var i;t===void 0&&(t=[]);const n=le(s),o=n===((i=s.ownerDocument)==null?void 0:i.body),r=z(n);return o?(Bt(r),t.concat(r,r.visualViewport||[],rt(n)?n:[],[])):t.concat(n,ce(n,[]))}function Bt(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function he(s){const t=R(s);let e=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const n=k(s),o=n?s.offsetWidth:e,r=n?s.offsetHeight:i,a=ft(e)!==o||ft(i)!==r;return a&&(e=o,i=r),{width:e,height:i,$:a}}function de(s){return O(s)?s:s.contextElement}function tt(s){const t=de(s);if(!k(t))return F(1);const e=t.getBoundingClientRect(),{width:i,height:n,$:o}=he(t);let r=(o?ft(e.width):e.width)/i,a=(o?ft(e.height):e.height)/n;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}const fi=F(0);function ue(s){const t=z(s);return!Ft()||!t.visualViewport?fi:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mi(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==z(s)?!1:t}function ot(s,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);const n=s.getBoundingClientRect(),o=de(s);let r=F(1);t&&(i?O(i)&&(r=tt(i)):r=tt(s));const a=mi(o,e,i)?ue(o):F(0);let l=(n.left+a.x)/r.x,c=(n.top+a.y)/r.y,h=n.width/r.x,d=n.height/r.y;if(o){const f=z(o),u=i&&O(i)?z(i):i;let m=f,p=Bt(m);for(;p&&i&&u!==m;){const g=tt(p),v=p.getBoundingClientRect(),y=R(p),T=v.left+(p.clientLeft+parseFloat(y.paddingLeft))*g.x,b=v.top+(p.clientTop+parseFloat(y.paddingTop))*g.y;l*=g.x,c*=g.y,h*=g.x,d*=g.y,l+=T,c+=b,m=z(p),p=Bt(m)}}return gt({width:h,height:d,x:l,y:c})}function Tt(s,t){const e=bt(s).scrollLeft;return t?t.left+e:ot(P(s)).left+e}function fe(s,t){const e=s.getBoundingClientRect(),i=e.left+t.scrollLeft-Tt(s,e),n=e.top+t.scrollTop;return{x:i,y:n}}function gi(s){let{elements:t,rect:e,offsetParent:i,strategy:n}=s;const o=n==="fixed",r=P(i),a=t?wt(t.floating):!1;if(i===r||a&&o)return e;let l={scrollLeft:0,scrollTop:0},c=F(1);const h=F(0),d=k(i);if((d||!d&&!o)&&((it(i)!=="body"||rt(r))&&(l=bt(i)),k(i))){const u=ot(i);c=tt(i),h.x=u.x+i.clientLeft,h.y=u.y+i.clientTop}const f=r&&!d&&!o?fe(r,l):F(0);return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+h.x+f.x,y:e.y*c.y-l.scrollTop*c.y+h.y+f.y}}function yi(s){return Array.from(s.getClientRects())}function pi(s){const t=P(s),e=bt(s),i=s.ownerDocument.body,n=K(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=K(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let r=-e.scrollLeft+Tt(s);const a=-e.scrollTop;return R(i).direction==="rtl"&&(r+=K(t.clientWidth,i.clientWidth)-n),{width:n,height:o,x:r,y:a}}const qt=25;function vi(s,t){const e=z(s),i=P(s),n=e.visualViewport;let o=i.clientWidth,r=i.clientHeight,a=0,l=0;if(n){o=n.width,r=n.height;const h=Ft();(!h||h&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}const c=Tt(i);if(c<=0){const h=i.ownerDocument,d=h.body,f=getComputedStyle(d),u=h.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(i.clientWidth-d.clientWidth-u);m<=qt&&(o-=m)}else c<=qt&&(o+=c);return{width:o,height:r,x:a,y:l}}const xi=new Set(["absolute","fixed"]);function wi(s,t){const e=ot(s,!0,t==="fixed"),i=e.top+s.clientTop,n=e.left+s.clientLeft,o=k(s)?tt(s):F(1),r=s.clientWidth*o.x,a=s.clientHeight*o.y,l=n*o.x,c=i*o.y;return{width:r,height:a,x:l,y:c}}function Qt(s,t,e){let i;if(t==="viewport")i=vi(s,e);else if(t==="document")i=pi(P(s));else if(O(t))i=wi(t,e);else{const n=ue(s);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return gt(i)}function me(s,t){const e=G(s);return e===t||!O(e)||et(e)?!1:R(e).position==="fixed"||me(e,t)}function bi(s,t){const e=t.get(s);if(e)return e;let i=ce(s,[]).filter(a=>O(a)&&it(a)!=="body"),n=null;const o=R(s).position==="fixed";let r=o?G(s):s;for(;O(r)&&!et(r);){const a=R(r),l=Rt(r);!l&&a.position==="fixed"&&(n=null),(o?!l&&!n:!l&&a.position==="static"&&!!n&&xi.has(n.position)||rt(r)&&!l&&me(s,r))?i=i.filter(h=>h!==r):n=a,r=G(r)}return t.set(s,i),i}function Ti(s){let{element:t,boundary:e,rootBoundary:i,strategy:n}=s;const r=[...e==="clippingAncestors"?wt(t)?[]:bi(t,this._c):[].concat(e),i],a=r[0],l=r.reduce((c,h)=>{const d=Qt(t,h,n);return c.top=K(d.top,c.top),c.right=zt(d.right,c.right),c.bottom=zt(d.bottom,c.bottom),c.left=K(d.left,c.left),c},Qt(t,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Si(s){const{width:t,height:e}=he(s);return{width:t,height:e}}function Mi(s,t,e){const i=k(t),n=P(t),o=e==="fixed",r=ot(s,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=F(0);function c(){l.x=Tt(n)}if(i||!i&&!o)if((it(t)!=="body"||rt(n))&&(a=bt(t)),i){const u=ot(t,!0,o,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else n&&c();o&&!i&&n&&c();const h=n&&!i&&!o?fe(n,a):F(0),d=r.left+a.scrollLeft-l.x-h.x,f=r.top+a.scrollTop-l.y-h.y;return{x:d,y:f,width:r.width,height:r.height}}function Lt(s){return R(s).position==="static"}function Jt(s,t){if(!k(s)||R(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return P(s)===e&&(e=e.ownerDocument.body),e}function ge(s,t){const e=z(s);if(wt(s))return e;if(!k(s)){let n=G(s);for(;n&&!et(n);){if(O(n)&&!Lt(n))return n;n=G(n)}return e}let i=Jt(s,t);for(;i&&ri(i)&&Lt(i);)i=Jt(i,t);return i&&et(i)&&Lt(i)&&!Rt(i)?e:i||di(s)||e}const Ci=async function(s){const t=this.getOffsetParent||ge,e=this.getDimensions,i=await e(s.floating);return{reference:Mi(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Hi(s){return R(s).direction==="rtl"}const Li={convertOffsetParentRelativeRectToViewportRelativeRect:gi,getDocumentElement:P,getClippingRect:Ti,getOffsetParent:ge,getElementRects:Ci,getClientRects:yi,getDimensions:Si,getScale:tt,isElement:O,isRTL:Hi},Ei=ii,Di=ni,Ii=Ke,zi=(s,t,e)=>{const i=new Map,n={platform:Li,...e},o={...n.platform,_c:i};return Je(s,t,{...n,platform:o})};let J=null,j={x:0,y:0};document.addEventListener("mousemove",s=>{j={x:s.clientX,y:s.clientY}});function Ai(){return{getBoundingClientRect(){return{x:j.x,y:j.y,width:0,height:0,top:j.y,left:j.x,right:j.x,bottom:j.y}}}}function Bi(s){return{getBoundingClientRect(){return{x:s.x,y:s.y,width:s.width,height:s.height,top:s.y,left:s.x,right:s.x+s.width,bottom:s.y+s.height}}}}function Oi(s,t,e){ye();const i=document.getElementById("tooltip-layer");if(!i)return;const n=document.createElement("div");n.className="demo-tooltip",n.innerHTML=t,i.appendChild(n),J=n;const o=e?Bi(e):Ai();zi(o,n,{placement:"top",middleware:[Ei(8),Ii(),Di({padding:8})]}).then(({x:r,y:a})=>{n.style.left=Math.round(r)+"px",n.style.top=Math.round(a)+"px"})}function ye(){J&&J.parentNode&&J.parentNode.removeChild(J),J=null}const pe=new Image;pe.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgZmlsbD0iI2ZmZmZmZiIvPjxwYXRoIGQ9Ik0xMiA2djZtMC0zbDMgMy02IDYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+";const Ri=[{id:"1",day:L.Monday,title:"Team Standup",startTime:new S(10,0),endTime:new S(11,0),description:"<p><strong>Daily team sync</strong></p><p>Discuss progress and blockers</p>",color:"#3b82f6",icon:{type:"font",content:"groups",fontFamily:"material-symbols-outlined"}},{id:"1a",day:L.Monday,title:"Client Call",startTime:new S(10,30),endTime:new S(11,30),description:"Overlaps with standup",color:"#ef4444",icon:{type:"font",content:"phone",fontFamily:"material-symbols-outlined"}},{id:"2",day:L.Monday,title:"Sprint Planning",startTime:new S(14,0),endTime:new S(16,0),description:"<h2>Sprint Planning</h2><p>Plan next sprint goals and <strong>priorities</strong></p><p><em>All team members required</em></p>",color:"#8b5cf6",icon:{type:"font",content:"event_note",fontFamily:"material-symbols-outlined"}},{id:"2a",day:L.Monday,title:"Code Review",startTime:new S(15,0),endTime:new S(17,0),description:"<p>Review <strong><em>critical</em></strong> pull requests</p><p>Focus on security and performance</p>",color:"#06b6d4",icon:{type:"font",content:"code",fontFamily:"material-symbols-outlined"}},{id:"3",day:L.Tuesday,title:"1-on-1",startTime:new S(11,0),endTime:new S(12,0),description:"<p><strong>Team member check-in</strong></p><p>Discuss career growth and <em>feedback</em></p>",color:"#10b981",icon:{type:"font",content:"person",fontFamily:"material-symbols-outlined"}},{id:"3a",day:L.Tuesday,title:"Quick Sync",startTime:new S(10,45),endTime:new S(11,30),description:"Overlaps with 1-on-1",color:"#f97316",icon:{type:"url",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTIgMTVsLTUtNSAxLjQxLTEuNDFMMTAgMTQuMTdsNy41OS03LjU5TDE5IDhsLTkgOXoiIGZpbGw9IiNmZmZmZmYiLz48L3N2Zz4="}},{id:"3b",day:L.Tuesday,title:"Lunch Meeting",startTime:new S(11,30),endTime:new S(12,30),description:"Overlaps with 1-on-1",color:"#84cc16",icon:{type:"url",url:"/week-peek/chef-man-cap-svgrepo-com.svg"}},{id:"4",day:L.Wednesday,title:"Design Review",startTime:new S(13,0),endTime:new S(14,0),description:"<h3>Design Review</h3><p>Review new <strong>UI/UX designs</strong> for upcoming features</p><p>Focus on <em>accessibility</em> and user experience</p>",color:"#f59e0b",icon:{type:"font",content:"palette",fontFamily:"material-symbols-outlined"}},{id:"4a",day:L.Wednesday,title:"Design Workshop",startTime:new S(12,30),endTime:new S(13,30),description:"Overlaps with review",color:"#a855f7",icon:{type:"font",content:"brush",fontFamily:"material-symbols-outlined"}},{id:"4b",day:L.Wednesday,title:"Follow-up",startTime:new S(13,45),endTime:new S(14,30),description:"Overlaps with review",color:"#14b8a6",icon:{type:"font",content:"reply",fontFamily:"material-symbols-outlined"}},{id:"4c",day:L.Wednesday,title:"Follow-up 2",startTime:new S(13,45),endTime:new S(14,30),description:"Overlaps with review, but not design workshop",color:"#14b8a6",icon:{type:"image",image:pe}},{id:"55",day:L.Thursday,title:"Team Meeting",startTime:new S(10,0),endTime:new S(11,0),description:"Weekly team meeting",color:"#6366f1",icon:{type:"font",content:"groups",fontFamily:"material-symbols-outlined"}},{id:"5",day:L.Thursday,title:"Team Meeting",startTime:new S(15,0),endTime:new S(16,0),description:"Weekly team meeting",color:"#6366f1",icon:{type:"font",content:"groups",fontFamily:"material-symbols-outlined"}},{id:"5a",day:L.Thursday,title:"Quick Update",startTime:new S(15,15),endTime:new S(16,45),description:"<h3>Quick Update</h3><p>Status update on <strong>key projects</strong></p><p>Discuss blockers and <em>next steps</em></p>",color:"#ec4899",icon:{type:"font",content:"update",fontFamily:"material-symbols-outlined"}},{id:"5b",day:L.Thursday,title:"Project Sync",startTime:new S(15,30),endTime:new S(16,30),description:"Overlaps with team meeting",color:"#22c55e",icon:{type:"font",content:"sync",fontFamily:"material-symbols-outlined"}},{id:"5c",day:L.Thursday,title:"Project Clink",startTime:new S(15,30),endTime:new S(16,30),description:"Overlaps with team meeting also",color:"#22c88f",icon:{type:"font",content:"link",fontFamily:"material-symbols-outlined"}},{id:"5d",day:L.Thursday,title:"Team Meeting 2",startTime:new S(15,0),endTime:new S(16,0),description:"Weekly team meeting",color:"#6366f1",icon:{type:"font",content:"groups",fontFamily:"material-symbols-outlined"}},{id:"5e",day:L.Thursday,title:"Stakeholder Update",startTime:new S(15,10),endTime:new S(16,10),description:"Another overlap to force +n",color:"#e11d48",icon:{type:"font",content:"account_circle",fontFamily:"material-symbols-outlined"}},{id:"5f",day:L.Thursday,title:"QA Sync",startTime:new S(15,20),endTime:new S(16,20),description:"Another overlap",color:"#0ea5e9",icon:{type:"font",content:"bug_report",fontFamily:"material-symbols-outlined"}},{id:"6",day:L.Friday,title:"Retro",startTime:new S(16,15),endTime:new S(18,15),description:"<h2>Sprint Retrospective</h2><p>What went <strong>well</strong>?<br/>What could be <em>improved</em>?<br/>Action items for next sprint</p>",color:"#ec4899",icon:{type:"font",content:"forum",fontFamily:"material-symbols-outlined"}}],at=document.getElementById("schedule-container"),Fi=localStorage.getItem("demo.orientation");let Y=Fi==="horizontal"?H.Horizontal:H.Vertical;const kt=document.createElement("link");kt.rel="stylesheet";kt.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0";document.head.appendChild(kt);const ut=Ot.create(at,{eventGap:"4px",visibleDays:[L.Monday,L.Tuesday,L.Wednesday,L.Thursday,L.Friday],startHour:8,endHour:18,orientation:Y,overflowIndicatorFormat:s=>s<=4?`+${s} další`:`+${s} dalších`,showNowIndicator:!0,icons:{className:"material-symbols-outlined",prevDay:"chevron_left",nextDay:"chevron_right",resetZoom:"close_fullscreen"}},Ri);if(!ut.success)throw at.innerHTML=`<p style="padding:1rem;color:#ff6b6b;">Failed to init: ${ut.error.message}</p>`,ut.error;const yt=ut.data,ve=document.getElementById("btn-vertical"),xe=document.getElementById("btn-horizontal"),ki=document.getElementById("btn-reset");function we(s){s!==Y&&(Y=s,localStorage.setItem("demo.orientation",Y===H.Horizontal?"horizontal":"vertical"),yt.updateConfig({orientation:Y}),ve.setAttribute("aria-pressed",String(Y===H.Vertical)),xe.setAttribute("aria-pressed",String(Y===H.Horizontal)))}ve.addEventListener("click",()=>we(H.Vertical));xe.addEventListener("click",()=>we(H.Horizontal));ki.addEventListener("click",()=>yt.resetZoom());at.addEventListener("schedule-event-hover",s=>{const t=s.detail,e=t.event,i=t.viewportBounds,n=`${e.startTime.toString()} - ${e.endTime.toString()}`,o=`<strong>${e.title}</strong>${n}<br/>${e.description??""}`;Oi(null,o,i)});at.addEventListener("schedule-event-hover-end",()=>ye());let Et=null;at.addEventListener("schedule-event-click",s=>{const e=s.detail.event;console.log("Event clicked:",e),Et===e.id?(yt.stopHighlighting(),Et=null):(Et=e.id,yt.highlightEvents(i=>i.id===e.id))});
